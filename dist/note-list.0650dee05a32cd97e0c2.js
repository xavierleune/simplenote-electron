(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1014:function(e,t,n){"use strict";n.r(t),n.d(t,"NoteList",(function(){return U}));var a=n(5),o=n.n(a),s=n(0),l=n.n(s),r=n(914),i=n(20),c=n.n(i),h=n(66),d=n(459);function u(){return l.a.createElement("svg",{className:"icon-tag",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},l.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),l.a.createElement("path",{d:"M18.29 5.71v5.17l-7 7L6.12 12.71l7-7h5.17m2-2h-8L4 12a1 1 0 0 0 0 1.41L10.59 20A1 1 0 0 0 12 20l8.29-8.29v-8Zm-4.5 5.5a1 1 0 1 0-1-1A1 1 0 0 0 15.79 9.21Z"}))}var m=n(385),p=n(460),g=n(214),w=()=>{var e=Object(h.d)(e=>e.ui.collection),t=Object(h.d)(e=>e.ui.hasLoadedNotes),n=Object(h.d)(e=>e.ui.searchQuery),a=Object(h.c)(),o=()=>n.length?l.a.createElement("button",{onClick:()=>a(g.a.ui.createNote({content:n}))},'Create a new note titled "',n,'"'):l.a.createElement("button",{onClick:()=>a(g.a.ui.createNote())},"Create your first note"),{message:s,icon:r,button:i}=(e=>{var{collection:t,searchQuery:n}=e;if(n.length>0)return{message:"No Results",icon:null,button:o()};switch(t.type){case"tag":return{message:'No notes tagged "'.concat(t.tagName,'"'),icon:l.a.createElement(u,null),button:null};case"trash":return{message:"Your trash is empty",icon:l.a.createElement(m.a,null),button:null};case"untagged":return{message:"No untagged notes",icon:l.a.createElement(p.a,null),button:null};default:return{message:"",icon:l.a.createElement(d.a,null),button:o()}}})({collection:e,searchQuery:n});return l.a.createElement("div",{className:"note-list-placeholder theme-color-fg"},l.a.createElement("div",{className:"no-notes-icon"},r),l.a.createElement("div",{className:"no-notes-message"},s),l.a.createElement("div",{className:"no-notes-button"},t&&i))};function v(){return l.a.createElement("svg",{className:"icon-published-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},l.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),l.a.createElement("path",{d:"M7.38 10.25L5.13 8.11l1.03-1.09 1.2 1.15 2.46-2.42 1.05 1.07L7.38 10.25zM13 0.93H3c-0.828 0-1.5 0.672-1.5 1.5l0 0v10.14c0 0.828 0.672 1.5 1.5 1.5h10c0.828 0 1.5-0.672 1.5-1.5V2.43C14.5 1.602 13.828 0.93 13 0.93L13 0.93zM3.5 12.07V4h9v8.07H3.5z"}))}function b(){return l.a.createElement("svg",{className:"icon-pinned-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},l.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),l.a.createElement("path",{d:"M4.41 10.17l-4-4 5.65-0.52L8.65 3.1 7.24 1.69l1.42-1.42 7.07 7.07 -1.42 1.42 -1.42-1.43 -2.56 2.58 -0.52 5.66 -4-4L3 14.41 1.59 13 4.41 10.17zM8.21 11.17L8.4 9l3.07-3.1 -1.4-1.41L7 7.6 4.87 7.79 8.21 11.17z"}))}function y(){return l.a.createElement("svg",{className:"icon-sync-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},l.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),l.a.createElement("path",{d:"M14 2v5h-0.09 -2.05H9l1.82-1.82C10.1 4.46 9.11 4 8 4 6.14 4 4.59 5.28 4.14 7H2.09C2.57 4.17 5.03 2 8 2c1.65 0 3.14 0.69 4.22 1.78L14 2zM8 12c-1.11 0-2.1-0.46-2.82-1.18L7 9H4.14 2.09 2v5l1.78-1.78C4.86 13.31 6.35 14 8 14c2.97 0 5.43-2.17 5.91-5h-2.05C11.41 10.72 9.86 12 8 12z"}))}var N=n(24),E=n(645),f=n.n(E),O=n(286),x=(e,t)=>e.length>0&&t.length>0?e.reduce((e,t)=>{var{filter:n,replacer:a}=t,o="string"==typeof n&&Object(O.b)(n),s=o&&o.length>0?new RegExp(Object(N.escapeRegExp)(o),"gi"):n;return f()(e,s,a)},t).map((e,t)=>e&&"string"!=typeof e?l.a.cloneElement(e,{key:t}):e):t,C=e=>({filter:e,replacer:e=>{if(e.length)return l.a.createElement("span",{className:"search-match"},e)}}),j=n(298),L=n(314),k=n(67);class D extends s.Component{constructor(e){super(e),o()(this,"createdAt",void 0),o()(this,"updateScheduled",void 0),this.createdAt=Date.now()}componentDidUpdate(e){var t,n;(null===(t=e.note)||void 0===t?void 0:t.content)!==(null===(n=this.props.note)||void 0===n?void 0:n.content)&&this.props.invalidateHeight(),this.props.lastUpdated<1e3&&!this.updateScheduled&&(this.updateScheduled=setTimeout(()=>this.forceUpdate(),1e3))}componentWillUnmount(){clearTimeout(this.updateScheduled)}render(){var{displayMode:e,hasPendingChanges:t,isOffline:n,isOpened:a,lastUpdated:o,noteId:s,note:r,openNote:i,pinNote:h,searchQuery:d,style:u}=this.props;if(!r)return l.a.createElement("div",null,"Couldn't find note");var{title:m,preview:p}=Object(j.c)(r,d),g=r.systemTags.includes("pinned"),w=!!r.publishURL,N=o-this.createdAt>1e3&&Date.now()-o<1200,E=c()("note-list-item",{"note-list-item-selected":a,"note-list-item-pinned":g,"note-recently-updated":N,"published-note":w}),f=c()("note-list-item-pinner",{"note-list-item-pinned":g}),k=g?"Unpin note ".concat(m):"Pin note ".concat(m),D=Object(O.a)(d).map(C);return l.a.createElement("div",{style:u,className:E,role:"row"},l.a.createElement("div",{className:"note-list-item-content",role:"cell"},l.a.createElement("div",{className:"note-list-item-status"},l.a.createElement("button",{"aria-label":k,className:f,onClick:()=>h(s,!g)},l.a.createElement(b,null))),l.a.createElement("button",{"aria-label":"Edit note ".concat(m),className:"note-list-item-text theme-color-border focus-visible",onClick:()=>i(s)},l.a.createElement("div",{className:"note-list-item-title"},l.a.createElement("span",null,x(D,Object(L.b)(m)))),"expanded"===e&&p.length>0&&l.a.createElement("div",{className:"note-list-item-excerpt theme-color-fg-dim"},Object(L.b)(p).split("\n").map((e,t)=>l.a.createElement(l.a.Fragment,{key:t},t>0&&l.a.createElement("br",null),x(D,e.slice(0,200))))),"comfy"===e&&p.length>0&&l.a.createElement("div",{className:"note-list-item-excerpt theme-color-fg-dim"},x(D,Object(L.b)(p).slice(0,200)))),l.a.createElement("div",{className:"note-list-item-status-right theme-color-border"},t&&l.a.createElement("span",{className:c()("note-list-item-pending-changes",{"is-offline":n})},l.a.createElement(y,null)),w&&l.a.createElement("span",{className:"note-list-item-published-icon"},l.a.createElement(v,null)))))}}var S={openNote:g.a.ui.openNote,pinNote:g.a.data.pinNote},P=Object(h.b)((e,t)=>{var n,{noteId:a}=t;return{displayMode:e.settings.noteDisplay,hasPendingChanges:k.f(e,a),isOffline:"offline"===e.simperium.connectionStatus,isOpened:e.ui.openedNote===a,lastUpdated:null!==(n=e.simperium.lastRemoteUpdate.get(a))&&void 0!==n?n:-1/0,note:e.data.notes.get(a),searchQuery:e.ui.searchQuery}},S)(D),I=n(473);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=(e,t)=>{switch(e.type){case"tag":return t;case"trash":return"Trash";case"untagged":return"Untagged Notes";default:return"All Notes"}};class U extends s.Component{constructor(){super(...arguments),o()(this,"state",{heightCache:new r.c({defaultHeight:135,fixedWidth:!0,keyMapper:e=>{var{filteredNotes:t,searchQuery:n,tagResultsFound:a}=this.props;return 0===a&&0===t.length?"no-notes":0===n.length||0===a?t[e]:0===e?"tag-suggestions":1===e?"notes-header":t[e-2]}}),lastNoteDisplay:null,windowWidth:null}),o()(this,"list",Object(s.createRef)()),o()(this,"handleShortcut",e=>{if(this.props.keyboardShortcuts){var{ctrlKey:t,metaKey:n,shiftKey:a}=e,o=e.key.toLowerCase(),{isSmallScreen:s,showNoteList:l}=this.props,r=t||n;return r&&a&&"k"===o?(this.props.selectNoteAbove(),e.stopPropagation(),e.preventDefault(),!1):r&&a&&"j"===o?(this.props.selectNoteBelow(),e.stopPropagation(),e.preventDefault(),!1):s&&r&&a&&"l"===o?(this.props.toggleNoteList(),e.stopPropagation(),e.preventDefault(),!1):!s||!l||"Enter"!==o||(this.props.openNote(),e.stopPropagation(),e.preventDefault(),!1)}}),o()(this,"toggleShortcuts",e=>{e?window.addEventListener("keydown",this.handleShortcut,!0):window.removeEventListener("keydown",this.handleShortcut,!0)})}componentDidMount(){this.toggleShortcuts(!0)}componentWillUnmount(){this.toggleShortcuts(!1)}render(){var{collection:e,filteredNotes:t,noteDisplay:n,onEmptyTrash:a,openedNote:o,openedTag:i,searchQuery:h,showTrash:d,tagResultsFound:u}=this.props,{heightCache:m}=this.state,p=((e,t,n)=>0===t.length||0===n?e:["tag-suggestions","notes-header",...e.length>0?e:["no-notes"]])(t,h,u),g=p.findIndex(e=>e===o),v=((e,t)=>{var{heightCache:n}=t;return t=>{var{index:a,key:o,parent:s,style:i}=t,c=e[a];return"no-notes"===c?l.a.createElement(r.b,{cache:n,columnIndex:0,key:"no-notes",parent:s,rowIndex:a},l.a.createElement("div",{className:"note-list is-empty",style:M(M({},i),{},{height:200})},l.a.createElement("span",{className:"note-list-placeholder theme-color-fg"},"No Notes"))):"tag-suggestions"===c||"notes-header"===c?"tag-suggestions"===c?l.a.createElement(r.b,{cache:n,columnIndex:0,key:"tag-suggestions",parent:s,rowIndex:a},l.a.createElement(I.a,{style:M({},i)})):l.a.createElement(r.b,{cache:n,columnIndex:0,key:"notes-header",parent:s,rowIndex:a},l.a.createElement("div",{className:"note-list-header",style:M({},i)},"Notes")):l.a.createElement(r.b,{cache:n,columnIndex:0,key:o,parent:s,rowIndex:a},l.a.createElement(P,{invalidateHeight:()=>n.clear(a,0),noteId:c,style:i}))}})(p,{heightCache:m}),b=0===p.length,y=l.a.createElement("div",{className:"note-list-empty-trash theme-color-border"},l.a.createElement("button",{type:"button",className:"button button-borderless button-danger",onClick:a},"Empty Trash"));return l.a.createElement("div",{className:c()("note-list",{"is-empty":b})},b?l.a.createElement(w,null):l.a.createElement(s.Fragment,null,l.a.createElement("div",{className:"note-list-items ".concat(n)},l.a.createElement(r.a,null,t=>{var{height:a,width:o}=t;return l.a.createElement(r.d,{"aria-label":R(e,i),ref:this.list,estimatedRowSize:126,height:a,noteDisplay:n,notes:p,rowCount:p.length,rowHeight:m.rowHeight,rowRenderer:v,scrollToIndex:g,tabIndex:null,width:o})})),d&&y))}}o()(U,"displayName","NoteList"),o()(U,"getDerivedStateFromProps",(e,t)=>(t.heightCache.clear(0),t.heightCache.clear(1),t.heightCache.clear(2),e.noteDisplay!==t.lastNoteDisplay||e.windowWidth!==t.windowWidth?(t.heightCache.clearAll(),{lastNoteDisplay:e.noteDisplay,windowWidth:e.windowWidth}):null));var A={onEmptyTrash:g.a.ui.emptyTrash,openNote:g.a.ui.openNote,selectNoteAbove:g.a.ui.selectNoteAbove,selectNoteBelow:g.a.ui.selectNoteBelow,toggleNoteList:g.a.ui.toggleNoteList};t.default=Object(h.b)(e=>({collection:e.ui.collection,isSmallScreen:k.d(e),keyboardShortcuts:e.settings.keyboardShortcuts,noteDisplay:e.settings.noteDisplay,filteredNotes:e.ui.filteredNotes,openedNote:e.ui.openedNote,openedTag:k.i(e),searchQuery:e.ui.searchQuery,showNoteList:e.ui.showNoteList,showTrash:k.k(e),tagResultsFound:e.ui.tagSuggestions.length,windowWidth:e.browser.windowWidth}),A)(U)}}]);