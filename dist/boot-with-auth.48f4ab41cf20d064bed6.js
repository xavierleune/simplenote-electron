(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1012:function(e,t,a){"use strict";a.r(t),a.d(t,"bootWithToken",(function(){return ur}));var n=a(0),r=a.n(n),o=a(5),s=a.n(o),i=a(66),l=(a(545),a(57)),c=a.n(l),u=Object(i.b)((e,t)=>{var{noteId:a}=t;return{lastUpdated:e.simperium.lastSync.get(a)}})(e=>{var{lastUpdated:t}=e;return void 0!==t?r.a.createElement("time",{dateTime:new Date(t).toISOString()},new Date(t).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})):r.a.createElement("span",null)}),d=a(74),m=a(298),p=e=>"simplenote://note/".concat(e),h=e=>{var t=new Set;if(!e.ui.openedNote)return[];var a=p(e.ui.openedNote);return e.data.notes.forEach((e,n)=>{e.content.includes(a)&&t.add(n)}),[...t.values()]},g=(e,t)=>{var a,n=e.data.notes.get(t);if(n&&e.ui.openedNote){var r=new RegExp(p(e.ui.openedNote),"gi"),o=(null==n||null===(a=n.content.match(r))||void 0===a?void 0:a.length)||0,{title:s}=Object(m.a)(n);return{count:o,noteId:t,modificationDate:null==n?void 0:n.modificationDate,title:s}}},E=a(214),v=Object(i.b)((e,t)=>{var{noteId:a}=t;return{reference:g(e,a)}},(e,t)=>{var{noteId:a}=t;return{openNote:()=>e(E.a.ui.selectNote(a))}})(e=>{var{openNote:t,reference:a}=e;return a?r.a.createElement("button",{className:"reference-link",onClick:t},r.a.createElement("span",{className:"reference-title note-info-name theme-color-fg"},a.title),r.a.createElement("span",{className:"theme-color-fg-dim"},a.count," Reference",a.count>1?"s":"",a.modificationDate&&", last modified ",a.modificationDate&&r.a.createElement("time",{dateTime:new Date(1e3*a.modificationDate).toISOString()},new Date(1e3*a.modificationDate).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))):null}),N=Object(i.b)(e=>({references:h(e)}))(e=>{var{references:t}=e;return t.length?r.a.createElement("div",{className:"note-references note-info-panel note-info-internal-link theme-color-border"},r.a.createElement("div",{className:"note-info-item"},r.a.createElement("div",{className:"note-info-name theme-color-fg-dim"},"Referenced In"),t.map(e=>r.a.createElement(v,{noteId:e,key:e})))):null}),f=a(67);class b extends n.Component{render(){var{noteId:e,note:t,onModalClose:a,theme:n}=this.props,o=1e3*t.creationDate,s=t.modificationDate?1e3*t.modificationDate:null;return r.a.createElement(c.a,{key:"note-info-modal",className:"dialog-renderer__content note-info theme-color-border theme-color-bg theme-color-fg dialog",contentLabel:"Document",isOpen:!0,onRequestClose:a,overlayClassName:"dialog-renderer__overlay",portalClassName:"dialog-renderer__portal",shouldCloseOnOverlayClick:!1},r.a.createElement("div",{className:"note-info-panel note-info-stats theme-color-border theme-color-fg-dim"},r.a.createElement("div",{className:"note-info-header theme-color-border"},r.a.createElement("h2",{className:"panel-title theme-color-fg"},"Document"),r.a.createElement("button",{type:"button","aria-label":"Close note info",className:"about-done button icon-button",onClick:a},r.a.createElement(d.a,null))),r.a.createElement("p",{className:"note-info-item"},r.a.createElement("span",{className:"note-info-item-text"},r.a.createElement("span",{className:"note-info-name theme-color-fg"},"Last synced"),r.a.createElement("span",{className:"note-info-detail theme-color-fg-dim"},r.a.createElement(u,{noteId:e})))),s&&r.a.createElement("p",{className:"note-info-item"},r.a.createElement("span",{className:"note-info-item-text"},r.a.createElement("span",{className:"note-info-name theme-color-fg"},"Modified"),r.a.createElement("span",{className:"note-info-detail theme-color-fg-dim"},r.a.createElement("time",{dateTime:new Date(s).toISOString()},new Date(s).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))))),r.a.createElement("p",{className:"note-info-item"},r.a.createElement("span",{className:"note-info-item-text"},r.a.createElement("span",{className:"note-info-name theme-color-fg"},"Created"),r.a.createElement("span",{className:"note-info-detail theme-color-fg-dim"},r.a.createElement("time",{dateTime:new Date(o).toISOString()},new Date(o).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))))),r.a.createElement("p",{className:"note-info-item"},r.a.createElement("span",{className:"note-info-item-text"},r.a.createElement("span",{className:"note-info-name theme-color-fg"},"Words"),r.a.createElement("span",{className:"note-info-detail theme-color-fg-dim"},((t.content||"").replace(/[\u200B]+/,"").trim().replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||[]).length))),r.a.createElement("p",{className:"note-info-item"},r.a.createElement("span",{className:"note-info-item-text"},r.a.createElement("span",{className:"note-info-name theme-color-fg"},"Characters"),r.a.createElement("span",{className:"note-info-detail theme-color-fg-dim"},function(e){return(e||"").replace(O,"_").length}(t.content))))),r.a.createElement(N,null))}}s()(b,"displayName","NoteInfo");var O=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var T={onModalClose:E.a.ui.toggleNoteInfo},y=Object(i.b)(e=>{var t=e.data.notes.get(e.ui.openedNote);return{noteId:e.ui.openedNote,note:t,theme:Object(f.b)(e)}},T)(b),w=a(20),_=a.n(w),S=a(382),A=a.n(S),R=a(24),I=a(547),C=a.n(I);var D=function(e){var{container:t,linkText:a,text:o}=e,s=Object(n.useRef)(),i=Object(n.useRef)(),l=Object(n.useRef)(),c=()=>{d(!0)},[u,d]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{if(u){var e=setTimeout(()=>d(!1),4e3);return()=>clearTimeout(e)}},[u]),Object(n.useEffect)(()=>{i.current=()=>o,l.current=c},[o,c]),Object(n.useEffect)(()=>{var e=new C.a(s.current,{container:(null==t?void 0:t.current)||void 0,text:()=>i.current()});return e.on("success",()=>l.current()),()=>e.destroy()},[]),r.a.createElement("button",{ref:s,type:"button",className:"button button-borderless"},u?"Copied!":a)},L=a(70),k=a.n(L),M=a(44),j=a.n(M);var x=function(e){var{className:t,isStandard:a}=e,n=j()(e,["className","isStandard"]);return r.a.createElement("span",{className:_()("checkbox-control",[t,{"checkbox-standard":a}])},r.a.createElement("input",k()({type:"checkbox"},n)),r.a.createElement("span",{className:"checkbox-control-base"},r.a.createElement("span",{className:"checkbox-control-checked"})))},P=a(100);class G extends n.Component{constructor(){super(...arguments),s()(this,"isMounted",!1),s()(this,"containerRef",r.a.createRef()),s()(this,"handleFocusTrapDeactivate",()=>{var{onFocusTrapDeactivate:e}=this.props;this.isMounted&&setTimeout(()=>e(),200)}),s()(this,"getNoteLink",(e,t)=>{var{title:a}=Object(m.a)(e);return"[".concat(a,"](simplenote://note/").concat(t,")")}),s()(this,"getPublishURL",e=>Object(R.isEmpty)(e)?null:"http://simp.ly/p/".concat(e)),s()(this,"pinNote",e=>this.props.pinNote(this.props.noteId,e)),s()(this,"publishNote",e=>this.props.publishNote(this.props.noteId,e)),s()(this,"markdownNote",e=>this.props.markdownNote(this.props.noteId,e))}componentDidMount(){this.isMounted=!0}componentWillUnmount(){this.isMounted=!1}render(){var{hasRevisions:e,isMarkdown:t,isPinned:a,noteId:n,note:o}=this.props,s=Object(R.includes)(o.systemTags,"published"),i=this.getPublishURL(o.publishURL),l=this.getNoteLink(o,n);return r.a.createElement(A.a,{focusTrapOptions:{clickOutsideDeactivates:!0,onDeactivate:this.handleFocusTrapDeactivate}},r.a.createElement("div",{className:"note-actions theme-color-bg theme-color-fg theme-color-border",ref:this.containerRef},r.a.createElement("div",{className:"note-actions-panel theme-color-border"},r.a.createElement("label",{className:"note-actions-item",htmlFor:"note-actions-pin-checkbox"},r.a.createElement("span",{className:"note-actions-item-text"},r.a.createElement("span",{className:"note-actions-name"},"Pin to top")),r.a.createElement("span",{className:"note-actions-item-control"},r.a.createElement(x,{id:"note-actions-pin-checkbox",checked:a,isStandard:!0,onChange:()=>{this.pinNote(!a)}}))),r.a.createElement("label",{className:"note-actions-item",htmlFor:"note-actions-markdown-checkbox"},r.a.createElement("span",{className:"note-actions-item-text"},r.a.createElement("span",{className:"note-actions-name"},"Markdown")),r.a.createElement("span",{className:"note-actions-item-control"},r.a.createElement(x,{id:"note-actions-markdown-checkbox",checked:t,isStandard:!0,onChange:()=>{this.markdownNote(!t)}}))),r.a.createElement("div",{className:"note-actions-item note-actions-internal-link"},r.a.createElement(D,{container:this.containerRef,text:l,linkText:"Copy Internal Link"})),e&&r.a.createElement("div",{className:"note-actions-item"},r.a.createElement("button",{className:"button button-borderless",onClick:this.props.toggleRevisions},"History…")),e||r.a.createElement("div",{className:"note-actions-item note-actions-item-disabled"},r.a.createElement("span",{className:"note-actions-disabled"},"History (unavailable)"))),r.a.createElement("div",{className:"note-actions-panel note-actions-public-link theme-color-border"},r.a.createElement("label",{className:"note-actions-item",htmlFor:"note-actions-publish-checkbox"},r.a.createElement("span",{className:"note-actions-item-text"},r.a.createElement("span",{className:"note-actions-name"},"Publish")),r.a.createElement("span",{className:"note-actions-item-control"},r.a.createElement(x,{id:"note-actions-publish-checkbox",checked:s,isStandard:!0,onChange:()=>{this.publishNote(!s)}}))),r.a.createElement("div",{className:_()("note-actions-item",{"note-actions-item-disabled":!s||!i})},s&&i?r.a.createElement(D,{container:this.containerRef,text:i,linkText:"Copy Link"}):s&&!i?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"note-actions-disabled"},"Copy Link"),r.a.createElement(P.a,{isWhite:!1,size:16,thickness:5})):r.a.createElement("span",{className:"note-actions-disabled"},"Copy Link"))),r.a.createElement("div",{className:"note-actions-panel theme-color-border"},r.a.createElement("div",{className:"note-actions-item"},r.a.createElement("button",{className:"button button-borderless",onClick:this.props.shareNote},"Collaborate…"))),r.a.createElement("div",{className:"note-actions-panel theme-color-border"},r.a.createElement("div",{className:"note-actions-item note-actions-trash"},r.a.createElement("button",{className:"button button-borderless",onClick:this.props.trashNote},"Move to Trash")))))}}s()(G,"displayName","NoteActions");var H={markdownNote:E.a.data.markdownNote,onFocusTrapDeactivate:E.a.ui.closeNoteActions,pinNote:E.a.data.pinNote,publishNote:E.a.data.publishNote,shareNote:()=>E.a.ui.showDialog("SHARE"),toggleRevisions:E.a.ui.toggleRevisions,trashNote:E.a.ui.trashOpenNote},F=Object(i.b)(e=>{var t,{data:a,ui:{openedNote:n}}=e,r=a.notes.get(n);return{noteId:n,note:r,hasRevisions:!(null===(t=a.noteRevisions.get(n))||void 0===t||!t.size),isMarkdown:null==r?void 0:r.systemTags.includes("markdown"),isPinned:null==r?void 0:r.systemTags.includes("pinned")}},H)(G),V=a(1013);function U(){return r.a.createElement("svg",{className:"icon-connection",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M12 15c1.1 0 2.09 0.44 2.81 1.16L12 18.97l-2.81-2.81C9.91 15.44 10.9 15 12 15zM2.12 9.09l1.41 1.41C5.7 8.34 8.69 7 12 7s6.3 1.34 8.47 3.5l1.41-1.41C19.35 6.56 15.86 5 12 5S4.65 6.56 2.12 9.09zM5.65 12.62l1.41 1.41C8.33 12.78 10.07 12 12 12s3.67 0.78 4.93 2.04l1.41-1.41C16.72 11 14.48 10 12 10S7.28 11 5.65 12.62z"}))}function B(){return r.a.createElement("svg",{className:"icon-no-connection",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M10.88 7.06L9.13 5.3C10.05 5.1 11.01 5 12 5c3.86 0 7.35 1.56 9.88 4.09l-1.41 1.41C18.3 8.34 15.31 7 12 7 11.62 7 11.25 7.02 10.88 7.06zM18.35 12.62c-1.16-1.15-2.63-1.98-4.27-2.37l3.32 3.32L18.35 12.62zM11.05 10.05L8.52 7.52 6.95 5.95 3.51 2.51 2.1 3.93l2.95 2.95C3.98 7.49 2.98 8.22 2.12 9.09l1.41 1.41C4.4 9.63 5.42 8.92 6.52 8.35l2.25 2.25c-1.18 0.45-2.24 1.15-3.12 2.02l1.41 1.41c0.9-0.89 2.03-1.53 3.3-1.84l3.08 3.08C13 15.11 12.51 15 12 15c-1.1 0-2.09 0.44-2.81 1.16L12 18.97l2.57-2.57 4.5 4.5 1.41-1.41 -7.39-7.39L11.05 10.05z"}))}a(548);var W=Object(i.b)(e=>({connectionStatus:e.simperium.connectionStatus}))(e=>{var{connectionStatus:t}=e;return r.a.createElement("div",{className:"navigation-bar__footer-item theme-color-fg-dim"},r.a.createElement(V.a,{enterDelay:200,classes:{tooltip:"icon-button__tooltip"},title:"green"===t?"Simplenote is communicating with the server.":"offline"===t?"Simplenote is operating in offline mode and changes won't be synchronized with the server until it connects again.":"Simplenote hasn't communicated with the server in a while; changes may not be synchronized with the server until the connection improves."},r.a.createElement("p",null,"green"===t?r.a.createElement(U,null):r.a.createElement(B,null),r.a.createElement("span",{className:"server-connection__label"},"Server connection"))))}),z=a(35),K=a(12),q=a.n(K),Y=e=>{var{icon:t,isSelected:a=!1,label:n,onClick:o}=e,s=_()("navigation-bar-item",{"is-selected":a}),i=_()("button","theme-color-fg");return r.a.createElement("div",{className:s},r.a.createElement("button",{type:"button",className:i,onClick:o},r.a.createElement("span",{className:"navigation-bar-item__icon"},t),n))};Y.propTypes={icon:q.a.element.isRequired,isSelected:q.a.bool,label:q.a.string.isRequired,onClick:q.a.func.isRequired};var Q=Y,Z=a(922);function J(){return r.a.createElement("svg",{className:"icon-reorder",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M19,8H5V6H19Zm2,3H3v2H21Zm-2,5H5v2H19Z"}))}var X={renameTag:E.a.data.renameTag},$=Object(i.b)(null,X)(e=>{var{editable:t,isSelected:a,onClick:o,renameTag:s,tagName:i}=e,[l,c]=Object(n.useState)(i),u=_()("tag-list-input","theme-color-fg",{"is-selected":a});return t?r.a.createElement("input",{className:u,readOnly:!t,onClick:o,value:l,onChange:e=>{c(e.target.value.replace(/[\s,]/g,""))},onBlur:e=>{var t,a=null===(t=e.target)||void 0===t?void 0:t.value.trim();a&&a!==i?s(i,a):c(i)},spellCheck:!1}):r.a.createElement("button",{className:u,onClick:o},l)}),ee=a(384),te=a(242),ae=a(68),ne=Object(Z.c)(()=>r.a.createElement(J,null)),re=Object(Z.b)(e=>{var{allowReordering:t,editingActive:a,isSelected:n,selectTag:o,theme:s,trashTag:i,value:[l,c]}=e;return r.a.createElement("li",{key:l,className:_()("tag-list-item","theme-color-border","theme-color-fg",{"is-selected":n}),"data-tag-name":c.name},r.a.createElement($,{editable:a,isSelected:n,onClick:()=>!a&&o(c.name),tagName:c.name}),a&&r.a.createElement("button",{className:"icon-button button-trash"},r.a.createElement(ee.a,{onClick:()=>i(c.name)})),a&&t&&r.a.createElement("button",{className:"icon-button button-reorder theme-color-fg-dim"},r.a.createElement(ne,null)))}),oe=Object(Z.a)(e=>{var{editingTags:t,items:a,openedTagHash:n,openTag:o,sortTagsAlpha:s,theme:i,trashTheTag:l}=e;return r.a.createElement("ul",{className:"tag-list-items"},a.map((e,a)=>r.a.createElement(re,{key:e[0],allowReordering:!s,editingActive:t,index:a,isSelected:n===e[0],selectTag:o,theme:i,trashTag:l,value:e})))});class se extends n.Component{constructor(){super(...arguments),s()(this,"reorderTag",e=>{var{newIndex:t,nodes:a,oldIndex:n}=e,r=a[n].node.dataset.tagName;this.props.reorderTag(r,t)})}render(){var{editingTags:e,onEditTags:t,openedTag:a,openTag:n,sortTagsAlpha:o,tags:s,theme:i,trashTag:l}=this.props,c=_()("tag-list",{"tag-list-editing":this.props.editingTags}),u=Array.from(s).filter(e=>{var[t,{name:a}]=e;return!Object(z.a)(a)}).sort((e,t)=>{var[a,n]=e,[r,s]=t;return o?n.name.localeCompare(s.name):void 0!==n.index&&void 0!==s.index?n.index-s.index:void 0===n.index?1:-1});return r.a.createElement("div",{className:c},r.a.createElement("div",{className:"tag-list-title theme-color-border"},r.a.createElement("h2",{className:"theme-color-fg"},"Tags"),u.length>0&&r.a.createElement("button",{className:"tag-list-edit-toggle button button-borderless",tabIndex:0,onClick:t},e?"Done":"Edit")),r.a.createElement(oe,{editingTags:e,lockAxis:"y",openedTagHash:a&&Object(ae.a)(a)||null,openTag:n,items:u,sortTagsAlpha:o,theme:i,onSortEnd:this.reorderTag,useDragHandle:!0,trashTheTag:l}))}}s()(se,"displayName","TagList");var ie={onEditTags:te.toggleTagEditing,openTag:te.openTag,reorderTag:(e,t)=>({type:"REORDER_TAG",tagName:e,newIndex:t}),trashTag:e=>Object(te.showDialog)("TRASH-TAG-CONFIRMATION",{tagName:e})},le=Object(i.b)(e=>{var{data:t,settings:{sortTagsAlpha:a},ui:{editingTags:n}}=e;return{editingTags:n,openedTag:f.i(e),sortTagsAlpha:a,tags:t.tags,theme:f.b(e)}},ie)(se),ce=a(459);function ue(){return r.a.createElement("svg",{className:"icon-settings",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M15 22H9v-2.59c-0.689-0.277-1.336-0.651-1.92-1.11l-2.24 1.3 -3-5.2 2.24-1.29c-0.107-0.736-0.107-1.484 0-2.22L1.84 9.6l3-5.2 2.24 1.3C7.667 5.245 8.313 4.871 9 4.59V2h6v2.59c0.689 0.277 1.336 0.651 1.92 1.11l2.24-1.3 3 5.2 -2.24 1.29c0.107 0.736 0.107 1.484 0 2.22l2.24 1.29 -3 5.2 -2.24-1.3c-0.584 0.459-1.231 0.833-1.92 1.11V22zM11 20h2v-2l0.72-0.21c0.896-0.277 1.717-0.756 2.4-1.4l0.54-0.51 1.77 1 1-1.73 -1.77-1 0.17-0.72c0.227-0.913 0.227-1.867 0-2.78l-0.17-0.72 1.77-1 -1-1.74 -1.77 1 -0.54-0.52c-0.688-0.639-1.512-1.115-2.41-1.39L13 6V4h-2v2l-0.72 0.21C9.386 6.488 8.566 6.963 7.88 7.6L7.34 8.12l-1.77-1 -1 1.74 1.77 1 -0.17 0.72c-0.227 0.913-0.227 1.867 0 2.78l0.17 0.72 -1.77 1 1 1.73 1.77-1 0.54 0.51c0.685 0.643 1.51 1.119 2.41 1.39L11 18V20zM12 15.5c-1.933 0-3.5-1.567-3.5-3.5s1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5S13.933 15.5 12 15.5zM12 10.5c-0.828 0-1.5 0.672-1.5 1.5s0.672 1.5 1.5 1.5 1.5-0.672 1.5-1.5S12.828 10.5 12 10.5z"}))}var de=a(460),me=a(32);class pe extends n.Component{constructor(){super(...arguments),s()(this,"isMounted",!1),s()(this,"handleFocusTrapDeactivate",()=>{var{onFocusTrapDeactivate:e,showNavigation:t}=this.props;t&&this.isMounted&&e()}),s()(this,"onHelpClicked",()=>Object(me.a)("http://simplenote.com/help")),s()(this,"onSelectTrash",()=>{this.props.selectTrash()}),s()(this,"isSelected",e=>{var{selectedRow:t}=e;return this.props.collection.type===t})}componentDidMount(){this.isMounted=!0}componentWillUnmount(){this.isMounted=!1}render(){var{autoHideMenuBar:e,isDialogOpen:t,onAbout:a,onSettings:n,onShowAllNotes:o,onShowUntaggedNotes:s,tags:i}=this.props,l=Array.from(i).filter(e=>{var[t,{name:a}]=e;return!Object(z.a)(a)}).length;return r.a.createElement(A.a,{paused:t,focusTrapOptions:{clickOutsideDeactivates:!0,onDeactivate:this.handleFocusTrapDeactivate}},r.a.createElement("div",{className:"navigation-bar theme-color-bg theme-color-fg theme-color-border"},r.a.createElement("div",{className:"navigation-bar__folders theme-color-border"},r.a.createElement(Q,{icon:r.a.createElement(ce.a,null),isSelected:this.isSelected({selectedRow:"all"}),label:"All Notes",onClick:o}),r.a.createElement(Q,{icon:r.a.createElement(ee.a,null),isSelected:this.isSelected({selectedRow:"trash"}),label:"Trash",onClick:this.onSelectTrash}),r.a.createElement(Q,{icon:r.a.createElement(ue,null),label:"Settings",onClick:n})),r.a.createElement("div",{className:"navigation-bar__tags theme-color-border"},l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null),r.a.createElement("div",{className:"navigation-bar__folders navigation-bar__untagged theme-color-border"},r.a.createElement(Q,{icon:r.a.createElement(de.a,null),isSelected:this.isSelected({selectedRow:"untagged"}),label:"Untagged Notes",onClick:s})))||null),r.a.createElement("div",{className:"navigation-bar__tools theme-color-border"},r.a.createElement("div",{className:"navigation-bar__server-connection"},r.a.createElement(W,null))),r.a.createElement("div",{className:"navigation-bar__footer"},r.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.props.showKeyboardShortcuts},"Keyboard Shortcuts")),r.a.createElement("div",{className:"navigation-bar__footer"},r.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.onHelpClicked},"Help & Support"),r.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:a},"About"))))}}s()(pe,"displayName","NavigationBar");var he={onAbout:()=>E.a.ui.showDialog("ABOUT"),onFocusTrapDeactivate:E.a.ui.toggleNavigation,onShowAllNotes:E.a.ui.showAllNotes,onShowUntaggedNotes:E.a.ui.showUntaggedNotes,onSettings:()=>E.a.ui.showDialog("SETTINGS"),selectTrash:E.a.ui.selectTrash,showKeyboardShortcuts:()=>E.a.ui.showDialog("KEYBINDINGS")},ge=Object(i.b)(e=>{var{data:t,settings:a,ui:{collection:n,dialogs:r,showNavigation:o}}=e;return{autoHideMenuBar:a.autoHideMenuBar,collection:n,isDialogOpen:r.length>0,showNavigation:o,tags:t.tags}},he)(pe),Ee=a(385),ve=a(21);function Ne(){return r.a.createElement("svg",{className:"icon-new-note",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M17 21H5c-1.105 0-2-0.895-2-2V7c0-1.105 0.895-2 2-2h7v2H5v12h12v-7h2v7C19 20.105 18.105 21 17 21zM7 10h8v2H7V10zM7 14h8v2H7V14zM22 5h-3V2h-2v3h-3v2h3v3h2V7h3V5z"}))}function fe(){return r.a.createElement("svg",{className:"icon-menu",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M21 11H3v2H21Zm0-5H3V8H21Zm0 10H3v2H21Z"}))}var be=a(286),Oe=e=>{var t,{collection:a,openedTag:n,onNewNote:o,searchQuery:s,toggleNavigation:i}=e;switch(a.type){case"tag":t=n;break;case"trash":t="Trash";break;case"untagged":t="Untagged Notes";break;default:t="All Notes"}var l=ve.d?"Cmd":"Ctrl";return r.a.createElement("div",{className:"menu-bar theme-color-border"},r.a.createElement(Ee.a,{icon:r.a.createElement(fe,null),onClick:i,title:"Menu • ".concat(l,"+Shift+U")}),r.a.createElement("div",{id:"notes-title",className:"notes-title","aria-hidden":"true"},t),r.a.createElement(Ee.a,{icon:r.a.createElement(Ne,null),onClick:()=>o(Object(be.b)(s)),title:"New Note • ".concat(l,"+Shift+I")}))};Oe.displayName="MenuBar";var Te=Object(i.b)(e=>({collection:e.ui.collection,openedTag:f.i(e),searchQuery:e.ui.searchQuery}),e=>({onNewNote:t=>{e(Object(te.createNote)(t))},toggleNavigation:()=>{e(Object(te.toggleNavigation)())}}))(Oe);function ye(){return r.a.createElement("svg",{className:"icon-back",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M21 11H6.83l5.72-5.72 -1.42-1.41L3 12l8.13 8.13 1.42-1.41L6.83 13H21V11z"}))}function we(){return r.a.createElement("svg",{className:"icon-checklist",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M21 11H11v2h10V11zM21 6H11v2h10V6zM21 16H11v2h10V16zM5.43 9.03L3 6.72l1.38-1.45 1.03 0.98L7.69 4 9.1 5.43 5.43 9.03zM5.43 14.51L3 12.21l1.38-1.45 1.03 0.97 2.28-2.24 1.41 1.42L5.43 14.51zM5.43 20L3 17.69l1.38-1.45 1.03 0.98 2.28-2.25L9.1 16.4 5.43 20z"}))}function _e(){return r.a.createElement("svg",{className:"icon-ellipsis-outline",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12c0 5.514 4.486 10 10 10 5.514 0 10-4.486 10-10C22 6.486 17.514 2 12 2zM12 20c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8S16.411 20 12 20zM13.5 12c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5 0.672-1.5 1.5-1.5S13.5 11.172 13.5 12zM9 12c0 0.828-0.672 1.5-1.5 1.5S6 12.828 6 12s0.672-1.5 1.5-1.5S9 11.172 9 12zM18 12c0 0.828-0.672 1.5-1.5 1.5S15 12.828 15 12s0.672-1.5 1.5-1.5S18 11.172 18 12z"}))}function Se(){return r.a.createElement("svg",{className:"icon-info",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10S17.523 22 12 22zM12 4c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8S16.418 4 12 4zM12 7c0.552 0 1 0.448 1 1s-0.448 1-1 1 -1-0.448-1-1S11.448 7 12 7zM11 11h2v6h-2V11z"}))}function Ae(){return r.a.createElement("svg",{className:"icon-preview",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M12 15.5c-1.933 0-3.5-1.567-3.5-3.5s1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5S13.933 15.5 12 15.5zM12 10.5c-0.828 0-1.5 0.672-1.5 1.5s0.672 1.5 1.5 1.5 1.5-0.672 1.5-1.5S12.828 10.5 12 10.5zM12 19.5c-4.45-0.003-8.363-2.945-9.6-7.22L2.32 12l0.08-0.28c1.546-5.302 7.098-8.346 12.4-6.8 3.279 0.956 5.844 3.521 6.8 6.8L21.68 12l-0.08 0.28C20.363 16.555 16.45 19.497 12 19.5zM4.41 12c1.396 4.192 5.926 6.458 10.118 5.062 2.39-0.796 4.266-2.672 5.062-5.062 -1.396-4.192-5.926-6.458-10.118-5.062C7.082 7.734 5.206 9.61 4.41 12z"}))}function Re(){return r.a.createElement("svg",{className:"icon-preview-stop",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M15.43 12.66c0.381-1.878-0.834-3.709-2.712-4.09 -0.455-0.092-0.923-0.092-1.378 0L15.43 12.66zM9.64 6.87C10.403 6.626 11.199 6.501 12 6.5c3.452 0.004 6.511 2.221 7.59 5.5 -0.369 1.126-0.992 2.153-1.82 3l1.43 1.43c1.125-1.168 1.948-2.593 2.4-4.15L21.68 12l-0.08-0.28c-1.541-5.303-7.09-8.353-12.393-6.812C8.823 5.019 8.447 5.154 8.08 5.31L9.64 6.87zM19.61 19.59L3 3 1.6 4.41 4.8 7.6c-1.123 1.158-1.946 2.572-2.4 4.12L2.32 12l0.08 0.28c1.237 4.275 5.15 7.217 9.6 7.22 1.338-0.003 2.662-0.279 3.89-0.81L18.2 21 19.61 19.59zM12 17.5c-3.452-0.004-6.511-2.221-7.59-5.5 0.363-1.124 0.979-2.15 1.8-3l2.35 2.35C8.524 11.565 8.504 11.782 8.5 12c0 1.933 1.567 3.5 3.5 3.5 0.211-0.005 0.422-0.025 0.63-0.06l1.69 1.69C13.571 17.374 12.788 17.499 12 17.5z"}))}function Ie(){return r.a.createElement("svg",{className:"icon-sidebar",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M20 4H4A2 2 0 0 0 2 6V18a2 2 0 0 0 2 2H20a2 2 0 0 0 2-2V6A2 2 0 0 0 20 4ZM4 6H7V18H4ZM20 18H9V6H20Z"}))}class Ce extends n.Component{constructor(){super(...arguments),s()(this,"renderNormal",()=>{var{editMode:e,newNote:t,isOffline:a,markdownEnabled:n,note:o,toggleNoteActions:s,toggleNoteInfo:i}=this.props;return o?r.a.createElement("div",{"aria-label":"note actions",role:"toolbar",className:"note-toolbar"},r.a.createElement("div",{className:"note-toolbar__column-left"},r.a.createElement("div",{className:"note-toolbar__button new-note-toolbar__button-sidebar theme-color-border"},r.a.createElement(Ee.a,{icon:r.a.createElement(Ne,null),onClick:()=>t(),title:"New Note • ".concat(ve.a,"+Shift+I")})),r.a.createElement("div",{className:"note-toolbar__button note-toolbar__button-sidebar"},r.a.createElement(Ee.a,{icon:r.a.createElement(Ie,null),onClick:this.props.toggleFocusMode,title:"Toggle Focus Mode"})),r.a.createElement("div",{className:"note-toolbar__button note-toolbar-back"},r.a.createElement(Ee.a,{icon:r.a.createElement(ye,null),onClick:this.props.toggleNoteList,title:"Back • ".concat(ve.a,"+Shift+L")}))),a&&r.a.createElement("div",{className:"offline-badge"},"OFFLINE"),r.a.createElement("div",{className:"note-toolbar__column-right"},n&&r.a.createElement("div",{className:"note-toolbar__button"},r.a.createElement(Ee.a,{icon:e?r.a.createElement(Ae,null):r.a.createElement(Re,null),onClick:this.props.toggleEditMode,title:"Preview • ".concat(ve.a,"+Shift+P")})),r.a.createElement("div",{className:"note-toolbar__button"},r.a.createElement(Ee.a,{icon:r.a.createElement(we,null),onClick:()=>window.dispatchEvent(new Event("toggleChecklist")),title:"Insert Checklist • ".concat(ve.a,"+Shift+C")})),r.a.createElement("div",{className:"note-toolbar__button"},r.a.createElement(Ee.a,{icon:r.a.createElement(Se,null),onClick:i,title:"Info"})),r.a.createElement("div",{className:"note-toolbar__button"},r.a.createElement(Ee.a,{icon:r.a.createElement(_e,null),onClick:s,title:"Actions"})))):r.a.createElement("div",{className:"note-toolbar-placeholder theme-color-border"})}),s()(this,"renderTrashed",()=>{var{isOffline:e}=this.props;return r.a.createElement("div",{className:"note-toolbar-trashed"},r.a.createElement("div",{className:"note-toolbar__column-left"},r.a.createElement(Ee.a,{icon:r.a.createElement(ye,null),onClick:this.props.toggleNoteList,title:"Back • ".concat(ve.a,"+Shift+L")})),e&&r.a.createElement("div",{className:"offline-badge"},"OFFLINE"),r.a.createElement("div",{className:"note-toolbar__column-right"},r.a.createElement("div",{className:"note-toolbar__button"},r.a.createElement("button",{type:"button",className:"button button-compact button-danger",onClick:this.props.deleteNoteForever},"Delete Forever")),r.a.createElement("div",{className:"note-toolbar__button"},r.a.createElement("button",{type:"button",className:"button button-primary button-compact",onClick:this.props.restoreNote},"Restore Note"))))})}render(){var{"aria-hidden":e,note:t}=this.props;return r.a.createElement("div",{"aria-hidden":e,className:"note-toolbar-wrapper theme-color-border"},null!=t&&t.deleted?this.renderTrashed():this.renderNormal())}}s()(Ce,"displayName","NoteToolbar");var De={deleteNoteForever:E.a.ui.deleteOpenNoteForever,newNote:E.a.ui.createNote,restoreNote:E.a.ui.restoreOpenNote,toggleEditMode:E.a.ui.toggleEditMode,toggleFocusMode:E.a.settings.toggleFocusMode,toggleNoteActions:E.a.ui.toggleNoteActions,toggleNoteInfo:E.a.ui.toggleNoteInfo,toggleNoteList:E.a.ui.toggleNoteList},Le=Object(i.b)(e=>{var t,{data:a,ui:{editMode:n,openedNote:r},simperium:{connectionStatus:o}}=e,s=r&&null!==(t=a.notes.get(r))&&void 0!==t?t:null;return{editMode:n,isOffline:"offline"===o,markdownEnabled:(null==s?void 0:s.systemTags.includes("markdown"))||!1,note:s}},De)(Ce),ke=a(919),Me=e=>{var{"aria-valuetext":t,disabled:a,min:n,max:o,value:s,onChange:i}=e;return r.a.createElement("input",{"aria-valuetext":t,"aria-label":"Select revision",className:"slider",disabled:a,type:"range",min:n,max:o,value:s,onChange:i})};class je extends n.Component{constructor(){super(...arguments),s()(this,"onAcceptRevision",()=>{var{noteId:e,revision:t,restoreRevision:a}=this.props;t&&a(e,t)}),s()(this,"onSelectRevision",e=>{var{target:{value:t}}=e,{revisions:a}=this.props,n=parseInt(t,10),r=[...a.keys()][n];this.props.openRevision(this.props.noteId,r)}),s()(this,"onCancelRevision",()=>{this.props.cancelRevision()})}render(){var{isViewingRevisions:e,note:t,openedRevision:a,revisions:n,restoreDeletedTags:o,toggleRestoringDeletedTags:s}=this.props;if(!e)return null;var i=n&&a?[...n.keys()].indexOf(a):-1,l=!a||a&&i===(null==n?void 0:n.size)-1,c=Number(100*((-1===i?(null==n?void 0:n.size)-1:i)-1)/((null==n?void 0:n.size)-2)),u="calc(".concat(c,"% + (").concat(8-.15*c,"px))"),d=Object(ke.a)(1e3*(a?n.get(a).modificationDate:t.modificationDate),"MMM d, yyyy h:mm a"),m=_()("revision-selector theme-color-border theme-color-fg theme-color-bg",{"is-visible":e});return r.a.createElement(A.a,{focusTrapOptions:{clickOutsideDeactivates:!0,fallbackFocus:"body",onDeactivate:this.onCancelRevision}},r.a.createElement("div",{className:m,role:"dialog","aria-labelledby":"revision-slider-title"},r.a.createElement("div",{className:"revision-selector-inner"},r.a.createElement("div",{id:"revision-slider-title",className:"revision-slider-title"},"History"),r.a.createElement("div",{"aria-hidden":!0,className:"revision-date",style:{left:u}},d),r.a.createElement("div",{className:"revision-slider"},r.a.createElement(Me,{"aria-valuetext":"Revision from ".concat(d),disabled:!n||0===n.size,min:1,max:(null==n?void 0:n.size)-1,value:i>-1?i:(null==n?void 0:n.size)-1,onChange:this.onSelectRevision})),r.a.createElement("section",{className:"revision-actions"},r.a.createElement("label",{className:"revision-deleted-tags-label",htmlFor:"revision-deleted-tags-checkbox"},r.a.createElement(x,{id:"revision-deleted-tags-checkbox",checked:o,isStandard:!0,onChange:s}),r.a.createElement("span",{className:"revision-deleted-tags-text"},"Restore deleted tags")),r.a.createElement("div",{className:"revision-buttons"},r.a.createElement("button",{className:"button button-secondary button-compact",onClick:this.onCancelRevision},"Cancel"),r.a.createElement("button",{"aria-label":"Restore revision from ".concat(d),disabled:l,className:"button button-primary button-compact",onClick:this.onAcceptRevision},"Restore"))))))}}var xe={openRevision:(e,t)=>({type:"OPEN_REVISION",noteId:e,version:t}),cancelRevision:()=>({type:"CLOSE_REVISION"}),restoreRevision:(e,t)=>({type:"RESTORE_NOTE_REVISION",noteId:e,note:t}),toggleRestoringDeletedTags:E.a.ui.toggleRestoringDeletedTags},Pe=Object(i.b)(e=>{var t,a,n,r,o,s=e.ui.openedNote,i=(null===(t=e.ui.openedRevision)||void 0===t?void 0:t[0])===e.ui.openedNote&&null!==(a=null===(n=e.ui.openedRevision)||void 0===n?void 0:n[1])&&void 0!==a?a:null,l=e.ui.restoreDeletedTags;return{isViewingRevisions:e.ui.showRevisions,noteId:s,note:null!==(r=e.data.notes.get(s))&&void 0!==r?r:null,openedRevision:i,revision:s&&i?Object(f.a)(e,s,i,l):null,revisions:null!==(o=e.data.noteRevisions.get(s))&&void 0!==o?o:null,restoreDeletedTags:l}},xe)(je);function Ge(){return r.a.createElement("svg",{className:"icon-search-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},r.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),r.a.createElement("path",{d:"M6.54 12c-3.037 0.022-5.518-2.423-5.54-5.46s2.423-5.518 5.46-5.54S11.978 3.423 12 6.46c0 0.027 0 0.053 0 0.08C11.978 9.546 9.546 11.978 6.54 12zM6.54 3C4.607 2.978 3.022 4.527 3 6.46 2.978 8.393 4.528 9.978 6.46 10 8.393 10.022 9.978 8.473 10 6.54c0.022-1.933-1.527-3.518-3.46-3.54C6.54 3 6.54 3 6.54 3zM10.939 12.349l1.414-1.414 2.616 2.616 -1.414 1.414L10.939 12.349z"}))}var He=new Set,Fe=()=>e=>t=>{var a=e(t);switch(t.type){case"SEARCH":He.forEach(e=>e());break;case"FOCUS_SEARCH_FIELD":He.forEach(e=>e("select"))}return a};class Ve extends n.Component{constructor(){var e;super(...arguments),e=this,s()(this,"inputField",Object(n.createRef)()),s()(this,"blur",()=>{this.inputField.current&&this.inputField.current.blur()}),s()(this,"focus",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"focus-only";e.inputField.current&&("select"===t&&e.inputField.current.select(),e.inputField.current.focus())})),s()(this,"interceptEsc",e=>{27===e.keyCode&&(""===this.props.searchQuery&&this.blur(),this.clearQuery())}),s()(this,"update",e=>{var{currentTarget:{value:t}}=e;this.props.onSearch(t)}),s()(this,"clearQuery",()=>this.props.onSearch(""))}componentDidMount(){var e;e=this.focus,He.add(e)}render(){var{openedTag:e,searchQuery:t}=this.props,a=t.length>0;return r.a.createElement("div",{className:"search-field theme-color-fg theme-color-border"},r.a.createElement("button",{"aria-label":"Focus search field",onClick:this.props.focusSearchField,className:"icon-button"},r.a.createElement(Ge,null)),r.a.createElement("input",{ref:this.inputField,type:"search",placeholder:"Search all notes and tags",onChange:this.update,onKeyUp:this.interceptEsc,value:t,spellCheck:!1}),a&&r.a.createElement("button",{"aria-label":"Clear search",className:"icon-button",onClick:this.clearQuery},r.a.createElement(d.a,null)))}}s()(Ve,"displayName","SearchField");var Ue=Object(i.b)(e=>({openedTag:f.i(e),searchQuery:e.ui.searchQuery}),e=>({focusSearchField:()=>e(Object(te.focusSearchField)()),onSearch:t=>{e(Object(te.search)(t))}}))(Ve),Be=a(386),We=a(537),ze=a(461);class Ke extends n.Component{render(){var{note:e,noteId:t,tags:a,"aria-hidden":n}=this.props;return r.a.createElement("div",{"aria-hidden":n,className:"note-revisions"},r.a.createElement(We.default,{noteId:t,note:e}),r.a.createElement("div",{className:"note-revisions-tag-list"},a.map(e=>{var{name:t,deleted:a}=e;return r.a.createElement(ze.a,{key:t,tagName:t,interactive:!1,deleted:a})})))}}s()(Ke,"displayName","NoteRevisions");var qe=Object(i.b)((e,t)=>{var a,n,r=null!==(a=t.noteId)&&void 0!==a?a:e.ui.openedNote,o=null!==(n=t.note)&&void 0!==n?n:e.data.notes.get(r),s=e.ui.restoreDeletedTags;return{tags:Object(f.e)(e,o).map(t=>{var a=Object(ae.a)(t);return{name:t,deleted:!e.data.tags.has(a)}}).filter(e=>s||!e.deleted),noteId:r,note:o}})(Ke),Ye=a(937),Qe=e=>{var{children:t,delay:a=1e3}=e,[o,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{var e=window.setTimeout(()=>{s(!0)},a);return()=>window.clearTimeout(e)},[]),r.a.createElement(Ye.a,{classNames:"transition-delay-enter",in:o,mountOnEnter:!0,timeout:200,unmountOnExit:!0},t)},Ze=r.a.lazy(()=>Promise.all([a.e(15),a.e(6)]).then(a.bind(null,1014))),Je=r.a.lazy(()=>Promise.all([a.e(14),a.e(5)]).then(a.bind(null,1015)));class Xe extends n.Component{constructor(){super(...arguments),s()(this,"openKeybindingsHelp",e=>{if(this.props.keyboardShortcuts){var{hideKeyboardShortcuts:t,keyboardShortcutsAreOpen:a,showKeyboardShortcuts:n}=this.props,{ctrlKey:r,metaKey:o}=e,s=e.key.toLowerCase();(r||o)&&"/"===s&&(a?t():n(),e.stopPropagation(),e.preventDefault())}}),s()(this,"render",()=>{var{showNoteList:e,hasRevisions:t,isFocusMode:a=!1,isNavigationOpen:o,isNoteInfoOpen:s,isNoteOpen:i,isSmallScreen:l,openedNote:c,openedRevision:u,showRevisions:d}=this.props,m=_()("app-layout",{"is-focus-mode":a,"is-navigation-open":o,"is-note-open":i,"is-showing-note-info":s}),p=!(e&&l),h=r.a.createElement(Qe,{delay:1e3},r.a.createElement("div",{className:"app-layout__placeholder"},r.a.createElement(Be.a,null))),g=!!d||void 0;return r.a.createElement("div",{className:m,"aria-hidden":!!o||void 0},r.a.createElement(n.Suspense,{fallback:h},r.a.createElement("aside",{"aria-hidden":g,"aria-label":"Notes list",className:"app-layout__source-column theme-color-bg theme-color-fg"},r.a.createElement(Te,null),r.a.createElement(Ue,null),r.a.createElement(Ze,null)),p&&r.a.createElement("main",{"aria-label":"Note editor",className:"app-layout__note-column theme-color-bg theme-color-fg theme-color-border"},r.a.createElement(Le,{"aria-hidden":g}),d?r.a.createElement(qe,{"aria-hidden":g,noteId:c,note:u}):r.a.createElement(Je,null),t&&r.a.createElement(Pe,null))))})}componentDidMount(){window.addEventListener("keydown",this.openKeybindingsHelp,!1)}componentWillUnmount(){window.removeEventListener("keydown",this.openKeybindingsHelp,!1)}}var $e={hideKeyboardShortcuts:()=>E.a.ui.closeDialog("KEYBINDINGS"),showKeyboardShortcuts:()=>E.a.ui.showDialog("KEYBINDINGS")},et=Object(i.b)(e=>{var t,a,n,r;return{hasRevisions:e.ui.showRevisions&&e.data.noteRevisions.has(e.ui.openedNote),keyboardShortcutsAreOpen:f.c(e,"KEYBINDINGS"),keyboardShortcuts:e.settings.keyboardShortcuts,isFocusMode:e.settings.focusModeEnabled,isNavigationOpen:e.ui.showNavigation,isNoteInfoOpen:e.ui.showNoteInfo,isNoteOpen:!e.ui.showNoteList,isSmallScreen:f.d(e),openedRevision:(null===(t=e.ui.openedRevision)||void 0===t?void 0:t[0])===e.ui.openedNote&&null!==(a=null===(n=e.data.noteRevisions.get(e.ui.openedNote))||void 0===n?void 0:n.get(null===(r=e.ui.openedRevision)||void 0===r?void 0:r[1]))&&void 0!==a?a:null,openedNote:e.ui.openedNote,showNoteList:e.ui.showNoteList,showRevisions:e.ui.showRevisions}},$e)(Xe),tt=e=>r.a.createElement("div",k()({className:"dev-badge"},e),"DEV"),at=a(95),nt=a(47),rt=a(73),ot=a(69);class st extends n.Component{render(){var{closeDialog:e}=this.props;return r.a.createElement("div",{className:"about"},r.a.createElement(ot.a,{hideTitleBar:!0,onDone:e,title:"Beta Release"},r.a.createElement("div",{className:"about-top"},r.a.createElement(nt.a,null),r.a.createElement("h1",null,"Simplenote")),r.a.createElement("p",{style:{textAlign:"center"}},"This is a beta release of Simplenote."),r.a.createElement("p",{style:{textAlign:"center"}},"This release provides an opportunity to test and share early feedback for a major overhaul of the internals of the app."),r.a.createElement("p",{style:{textAlign:"center"}},"Please use with caution and the understanding that ",r.a.createElement("br",null),"this comes without any stability guarantee."),r.a.createElement("button",{type:"button","aria-label":"Close dialog",className:"about-done button",onClick:e},r.a.createElement(rt.a,null))))}}var it={closeDialog:te.closeDialog},lt=Object(i.b)(null,it)(st);function ct(){return r.a.createElement("svg",{className:"icon-attention",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},r.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),r.a.createElement("path",{d:"M14.72 11.75 9.3 2.28a1.49 1.49 0 0 0-2.6 0L1.28 11.75A1.51 1.51 0 0 0 2.59 14H13.41A1.51 1.51 0 0 0 14.72 11.75ZM8 13a1 1 0 1 1 1-1A1 1 0 0 1 8 13ZM9 9A1 1 0 0 1 7 9V5A1 1 0 0 1 9 5Z"}))}var ut=e=>{var t=[];return e.data.notes.forEach((a,n)=>{var r,o=null===(r=e.simperium.ghosts[1].get("note"))||void 0===r?void 0:r.get(n);o&&Object(f.g)(a,o.data)||t.push(n)}),t},dt=e=>({notes:ut(e),preferences:[],tags:[]}),mt=a(556),pt=a.n(mt),ht=e=>e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n"),gt=e=>{var t=[],a=[];return[...e.entries()].forEach(e=>{var[n,r]=e,[o,s]=Object(R.partition)(Object(R.sortBy)(r.tags,e=>e.toLocaleLowerCase()),z.a),i=Object.assign({id:n,content:ht(r.content),creationDate:new Date(1e3*r.creationDate).toISOString(),lastModified:new Date(1e3*r.modificationDate).toISOString()},r.systemTags.includes("pinned")&&{pinned:!0},r.systemTags.includes("markdown")&&{markdown:!0},s.length&&{tags:s},r.systemTags.includes("published")&&(null==r?void 0:r.publishURL)&&{publicURL:"http://simp.ly/p/".concat(r.publishURL)},r.systemTags.includes("shared")&&o.length&&{collaboratorEmails:o});r.deleted?a.push(i):t.push(i)}),Promise.resolve({activeNotes:t,trashedNotes:a})},Et=a(557),vt=a.n(Et);function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ft(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var bt=e=>ft(ft({},e),{},{fileName:e.content.split("\n").map(e=>e.trim()).map(vt.a).filter(R.identity).concat("untitled").shift().slice(0,40)}),Ot=e=>{if(!e.tags)return e;var t=e.tags.reduce((e,t)=>{var[a,n]=e;return n.length+t.length>75?[[...a,n],t]:[a,"".concat(n,", ").concat(t)]},[[],""]).reduce((e,t)=>[...e,t]).map(e=>e.replace(/^, /,""));return ft(ft({},e),{},{content:"".concat(e.content,"\n\nTags:\n  ").concat(t.join("\n  "))})},Tt=(e,t)=>{var a,[n,r]=e,o=null!==(a=r.get(t.fileName))&&void 0!==a?a:0;r.set(t.fileName,o+1);var s=o>0?"".concat(t.fileName," (").concat(o,")"):t.fileName;return[[...n,ft(ft({},t),{},{fileName:s})],r]},yt=e=>a.e(13).then(a.t.bind(null,941,7)).then(t=>{var{default:a}=t,n=new a;return n.file("source/notes.json",ht(JSON.stringify(e,null,2))),e.activeNotes.map(Ot).map(bt).reduce(Tt,[[],new Map]).shift().forEach(e=>{var{content:t,fileName:a,lastModified:r}=e;n.file("".concat(a,".txt"),t,{date:new Date(r)})}),e.trashedNotes.map(Ot).map(bt).reduce(Tt,[[],new Map]).shift().forEach(e=>{var{content:t,fileName:a,lastModified:r}=e;n.file("trash/".concat(a,".txt"),t,{date:new Date(r)})}),n}).catch(console.log),wt=e=>gt(e).then(yt).then(e=>e.generateAsync({compression:"DEFLATE",platform:Object(R.get)(window,"process.platform","DOS"),type:"blob"})).then(e=>pt()(e,"notes.zip")).catch(console.log);class _t extends n.Component{constructor(){super(...arguments),s()(this,"exportUnsyncedNotes",()=>{var{closeDialog:e,notes:t}=this.props;wt(t).then(e)})}render(){var{description:e,unsafeAction:t,safeAction:a,closeDialog:o,action:s,notes:i}=this.props;return r.a.createElement("div",{className:"logoutConfirmation"},r.a.createElement(ot.a,{onDone:o,title:"Unsynchronized Notes"},r.a.createElement("p",{className:"explanation"},i.size>0?e:"All notes have synchronized!"),i.size>0&&r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"explanation-secondary"},"Possibly unsynchronized notes"),r.a.createElement("section",{className:"change-list"},r.a.createElement("ul",null,[...i.entries()].map(e=>{var[t,a]=e,{title:n,preview:o}=Object(m.c)(a);return r.a.createElement("li",{key:t},r.a.createElement(ct,null),r.a.createElement("span",{className:"note-title"},n))})))),i.size>0&&r.a.createElement("button",{className:"export-unsynchronized",onClick:this.exportUnsyncedNotes},"Export unsynchronized notes"),r.a.createElement("section",{className:"action-button"},r.a.createElement("button",{className:"log-out",onClick:s},i.size>0?t:a))))}}var St={closeDialog:te.closeDialog},At=Object(i.b)(e=>{var t=dt(e);return{notes:new Map(t.notes.map(t=>[t,e.data.notes.get(t)]))}},St)(_t),Rt={reallyCloseWindow:E.a.electron.reallyCloseWindow},It=Object(i.b)(null,Rt)(e=>{var{reallyCloseWindow:t}=e;return r.a.createElement(At,{description:"Closing the app with unsynchronized notes could cause data loss.",unsafeAction:"Close anyway",safeAction:"Safely close app",action:t})}),Ct=a(923);function Dt(){return r.a.createElement("svg",{className:"icon-cloud",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M17.5 19H7A5 5 0 0 1 6.92 9 5.58 5.58 0 0 1 12.1 5.5 5.64 5.64 0 0 1 17.59 10a4.5 4.5 0 0 1-0.09 9ZM12.1 7.5a3.59 3.59 0 0 0-3.49 2.74L8.43 11H7a3 3 0 0 0 0 6H17.5a2.5 2.5 0 0 0 0-5H15.72l0-1A3.62 3.62 0 0 0 12.1 7.5Z"}))}function Lt(){return r.a.createElement("svg",{className:"icon-file-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},r.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),r.a.createElement("path",{d:"M9 0H4.001C2.896 0 2 0.896 2 2.001v11.997C2 15.104 2.896 16 4.001 16h7.997C13.104 16 14 15.104 14 13.999V5L9 0zM8 6V1l5 5H8z"}))}var kt={name:"simplenote",fileTypes:["json"]},Mt={name:"evernote",fileTypes:["enex"]},jt={name:"text-files",fileTypes:["txt","md"]},xt=[kt,Mt,jt],Pt=e=>{switch(e.substring(e.lastIndexOf(".")+1,e.length)||e){case"json":return kt;case"enex":return Mt;case"txt":case"md":return jt}throw new Error("No importer found for file ".concat(e))},Gt=a(75);function Ht(e){var{acceptedTypes:t,locked:a,multiple:o,onAccept:s,onReset:i}=e,[l,c]=Object(n.useState)(),[u,d]=Object(n.useState)(new Array),m=Object(n.useCallback)((e,t)=>{0===e.length?(e=>{!o&&e.length>1?d([...u,"Choose a single file"]):d([...u,"File type is incorrect"]),c(void 0),i()})(t):(e=>{for(var t=[],a=0;a<e.length;a++){var n=e[a];Pt(n.name)?t.push(n):d([...u,'The file type for "'.concat(n.name,'" is not recognized')])}c(t),s(t)})(e)},[]),{getRootProps:p,getInputProps:h,isDragActive:g}=Object(Ct.a)({accept:t,disabled:a,multiple:o,onDrop:m}),E=()=>r.a.createElement(n.Fragment,null,u.length>0?r.a.createElement(Gt.a,null):r.a.createElement(Dt,null),g?"Drop files here":r.a.createElement("div",{className:"drop-instructions"},"Drag and drop to select files or ",r.a.createElement("span",null,"browse")," to choose")),v=()=>{var e=l.map(e=>r.a.createElement("li",{key:e.name,title:e.name},r.a.createElement(Lt,null),r.a.createElement("span",null,e.name))),t=u.map(e=>r.a.createElement("li",{key:e},r.a.createElement(Gt.a,null),e));return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"accepted-files-header"},l.length>1?"Import Files":"Import File"),r.a.createElement("ul",{className:"accepted-files"},e),u.length>0&&r.a.createElement("ul",{className:"error-message"},t))};return r.a.createElement("div",k()({},p(),{className:_()({"is-accepted":l},"importer-dropzone theme-color-border")}),r.a.createElement("input",h()),l?r.a.createElement(v,null):r.a.createElement(E,null))}Ht.propTypes={acceptedTypes:q.a.string,locked:q.a.bool.isRequired,multiple:q.a.bool,onAccept:q.a.func.isRequired,onReset:q.a.func.isRequired};var Ft=Ht,Vt=e=>{var{children:t,shouldMount:a,wrapperClassName:n=""}=e;return r.a.createElement(Ye.a,{in:a,classNames:"transition-fade-in-out",mountOnEnter:!0,timeout:200,unmountOnExit:!0},r.a.createElement("div",{className:n},t))},Ut=e=>{var{children:t,headingLevel:a=3}=e;return Object(n.createElement)("h".concat(a),{className:"panel-title theme-color-fg-dim"},t)},Bt=e=>{var{className:t,onChange:a}=e,n=j()(e,["className","onChange"]);return r.a.createElement("span",{className:_()("toggle-control",[t])},r.a.createElement("input",k()({type:"checkbox",onChange:e=>{var{currentTarget:{checked:t}}=e;return a(t)}},n)),r.a.createElement("span",{className:"toggle-control-layers"},r.a.createElement("span",{className:"toggle-control-unchecked-color"}),r.a.createElement("span",{className:"toggle-control-checked-color"}),r.a.createElement("span",{className:"toggle-control-knob"})))},Wt=a(938),zt=e=>r.a.createElement(Wt.a,k()({classes:{root:"progress-bar",bar:"progress-bar__bar"}},e));class Kt extends r.a.Component{shouldComponentUpdate(e){return!(!this.props.endValue&&this.props.isDone===e.isDone)}render(){var{currentValue:e,endValue:t,isDone:a}=this.props,n=()=>a?r.a.createElement(zt,{variant:"determinate",value:100}):r.a.createElement(zt,null);return t?r.a.createElement(zt,{variant:"determinate",value:e/t*100}):r.a.createElement(n,null)}}s()(Kt,"propTypes",{currentValue:q.a.number.isRequired,endValue:q.a.number,isDone:q.a.bool.isRequired});var qt=Kt,Yt=e=>{var t,{currentValue:a,isDone:n}=e,o=1===a?"note":"notes";return t=n?"Done! ".concat(a," ").concat(o," imported."):a?"".concat(a," ").concat(o," imported..."):"Importing...",r.a.createElement("p",{role:"status","aria-live":"polite"},t)};Yt.propTypes={currentValue:q.a.number.isRequired,isDone:q.a.bool.isRequired};var Qt=Yt,Zt=e=>{var{currentValue:t=0,endValue:a=0,isDone:n}=e;return r.a.createElement("section",{className:"import-progress"},r.a.createElement(qt,{currentValue:t,endValue:n?t:a,isDone:n}),r.a.createElement(Qt,{currentValue:t,isDone:n}))},Jt=a(72),Xt=a.n(Jt),$t=a(43);class ea extends $t.EventEmitter{constructor(e,t,n){var r;super(),r=this,s()(this,"addNote",void 0),s()(this,"options",void 0),s()(this,"recordEvent",void 0),s()(this,"importFiles",void 0),s()(this,"importNotes",e=>{var t=0;if(e){for(var n=0;n<e.length;n++){var o=e[n],s=Pt(o.name),i=this.importFiles.get(s.name);i.push(o),this.importFiles.set(s.name,i)}var l=0,c=0,u=e=>(a,n)=>{"complete"===a?(l++,t+=n,c===l&&this.emit("status","complete",t),e()):this.emit("status",a,n)};this.importFiles.forEach(function(){var e=Xt()((function*(e,t){e.length>0&&(yield*function*(){for(var{default:n}=yield(e=>{switch(e){case"simplenote":return a.e(9).then(a.bind(null,942));case"evernote":return a.e(8).then(a.bind(null,1017));case"text-files":return a.e(10).then(a.bind(null,943))}throw new Error("Unrecognized importer named ".concat(e))})(t),o=new n(r.addNote,r.options,r.recordEvent),s=function*(t){yield new Promise(a=>{c++;var n=u(()=>{o.off("status",n),a(!0)});o.on("status",n),o.importNotes([e[t]])})},i=0;i<e.length;i++)yield*s(i)}())}));return function(t,a){return e.apply(this,arguments)}}())}else this.emit("status","error","No files to import.")}),this.addNote=e,this.options=t,this.recordEvent=n,this.importFiles=new Map,xt.forEach(e=>{this.importFiles.set(e.name,[])})}}var ta=ea;class aa extends n.Component{constructor(){super(...arguments),s()(this,"state",{errorMessage:void 0,finalNoteCount:void 0,importedNoteCount:0,isDone:!1,setMarkdown:!1,shouldShowProgress:!1}),s()(this,"initImporter",()=>{var e=new ta(this.props.importNote,{isMarkdown:this.state.setMarkdown},this.props.recordEvent),t=Object(R.throttle)(e=>{this.setState({importedNoteCount:e})},20);return e.on("status",(e,a)=>{switch(e){case"progress":t(a);break;case"complete":this.setState({finalNoteCount:a,isDone:!0});break;case"error":this.setState({errorMessage:a,shouldShowProgress:!1}),window.setTimeout(()=>{this.setState({isDone:!0})},200)}}),e}),s()(this,"startImport",()=>{this.setState({shouldShowProgress:!0}),this.props.onStart(),this.initImporter().importNotes(this.props.files)})}render(){var{endValue:e,locked:t,onClose:a}=this.props,{optionsHint:n}=this.props.source,{errorMessage:o,finalNoteCount:s,importedNoteCount:i,isDone:l,setMarkdown:c,shouldShowProgress:u}=this.state;return r.a.createElement("div",{className:"source-importer-executor"},r.a.createElement("section",{className:"source-importer-executor__options"},r.a.createElement(Ut,{headingLevel:3},"Options"),r.a.createElement("label",null,r.a.createElement("div",{className:"enable-markdown"},"Enable Markdown on all notes"),r.a.createElement(Bt,{id:"source-importer-executor__checkbox",className:"source-importer-executor__checkbox",onChange:()=>this.setState({setMarkdown:!c}),checked:c,disabled:t})),n&&r.a.createElement("p",{className:"theme-color-fg-dim"},n)),r.a.createElement(Vt,{shouldMount:Boolean(o)},r.a.createElement("div",{role:"alert",className:"source-importer-executor__error"},o)),r.a.createElement(Vt,{shouldMount:u},r.a.createElement(Zt,{currentValue:l?s:i,endValue:e,isDone:l})),r.a.createElement("div",{className:"source-importer-executor__button"},l?r.a.createElement("button",{className:"button button-primary",type:"button",onClick:a},"Close"):r.a.createElement("button",{className:"button button-primary",disabled:t,type:"button",onClick:this.startImport},"Import")))}}var na={importNote:E.a.data.importNote,recordEvent:E.a.analytics.recordEvent},ra=Object(i.b)(null,na)(aa);class oa extends r.a.Component{constructor(){super(...arguments),s()(this,"state",{acceptedFiles:void 0})}render(){var{buckets:e,onClose:t,onStart:a,locked:n=!1,source:o}=this.props,{acceptedTypes:s,instructions:i,title:l}=this.props.source,{acceptedFiles:c}=this.state,u=Boolean(c);return r.a.createElement("div",{className:"source-importer"},!u&&r.a.createElement("p",null,l,r.a.createElement("br",null),i),r.a.createElement(Ft,{acceptedTypes:s,locked:n,multiple:!0,onAccept:e=>this.setState({acceptedFiles:e}),onReset:()=>this.setState({acceptedFiles:void 0})}),r.a.createElement("div",{className:"dialog-buttons"},r.a.createElement("button",{className:"button disabled button-primary",type:"button",disabled:!0},"Import")),r.a.createElement(Vt,{wrapperClassName:"source-importer__executor-wrapper",shouldMount:u},r.a.createElement(ra,{buckets:e,endValue:u?c.length:void 0,files:c,locked:n,onClose:t,onStart:a,source:o})))}}s()(oa,"propTypes",{buckets:q.a.object,locked:q.a.bool,onClose:q.a.func.isRequired,onStart:q.a.func.isRequired,source:q.a.shape({acceptedTypes:q.a.string,instructions:q.a.string,multiple:q.a.bool})});var sa=oa;class ia extends n.Component{constructor(){super(...arguments),s()(this,"state",{importStarted:!1})}render(){var{closeDialog:e}=this.props,{importStarted:t}=this.state,a={acceptedTypes:ve.b?".txt,.md,.json,.enex":".txt,.md,.json",title:"Select the notes you'd like to import.",instructions:ve.b?"Accepted file formats: Simplenote (JSON), Text (TXT, MD) and Evernote (ENEX).":"Accepted file formats: Simplenote (JSON) and Text (TXT, MD).",multiple:!0};return r.a.createElement(ot.a,{className:"import",closeBtnLabel:t?"":"Cancel",onDone:t?void 0:e,title:"Import Notes"},r.a.createElement("div",{className:"import__inner"},r.a.createElement(sa,{locked:t,onClose:e,onStart:()=>this.setState({importStarted:!0}),source:a})))}}var la={closeDialog:te.closeDialog},ca=Object(i.b)(null,la)(ia),ua=e=>{var{keys:t,children:a}=e;return r.a.createElement("div",{className:"keybindings__key-item"},r.a.createElement("div",{className:"keybindings__key-list"},t.map((e,t)=>r.a.createElement(n.Fragment,{key:t},t>0&&" + ","string"==typeof e?r.a.createElement("kbd",{key:e},e):r.a.createElement(r.a.Fragment,null,r.a.createElement("kbd",null,e[0])," / ",r.a.createElement("kbd",null,e[1])))))," - ",r.a.createElement("div",{className:"keybindings__key-description"},a))};class da extends n.Component{render(){var{closeDialog:e}=this.props;return r.a.createElement("div",{className:"keybindings"},r.a.createElement(ot.a,{onDone:e,title:"Keyboard Shortcuts"},r.a.createElement("div",{className:"keybindings__sections"},r.a.createElement("section",null,r.a.createElement("h1",null,"View"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"/"]},"Show keyboard shortcuts")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","F"]},"Toggle focus mode")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","S"]},"Focus search field")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"G"]},"Jump to next match in note")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","G"]},"Jump to previous match in note")),ve.b&&r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"+"]},"Increase font size")),ve.b&&r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"-"]},"Decrease font size")),ve.b&&r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"0"]},"Reset font size")))),r.a.createElement("section",null,r.a.createElement("h1",null,"Navigation"),r.a.createElement("ul",null,ve.b&&r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,","]},"Open app preferences")),ve.b&&r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","E"]},"Export all notes")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","U"]},"Toggle tag list")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","K"]},"Open note above current one")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","J"]},"Open note below current one")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","Y"]},"Toggle editing content/tags")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","L"]},"Toggle note list (on narrow screens)")))),r.a.createElement("section",null,r.a.createElement("h1",null,"Note Editing"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","I"]},"Create new note")),ve.b&&r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"P"]},"Print note")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","P"]},"Toggle Markdown preview")),r.a.createElement("li",null,r.a.createElement(ua,{keys:[ve.a,"Shift","C"]},"Insert checklist item")))))))}}var ma={closeDialog:te.closeDialog},pa=Object(i.b)(null,ma)(da),ha={reallyLogOut:E.a.ui.reallyLogOut},ga=Object(i.b)(null,ha)(e=>{var{reallyLogOut:t}=e;return r.a.createElement(At,{description:"Logging out will delete any unsynchronized notes.",unsafeAction:"Log out",safeAction:"Safely log out",action:t})}),Ea=a(921);class va extends n.Component{render(){var{children:e,tabNames:t}=this.props;return r.a.createElement(Ea.d,{selectedTabClassName:"is-active"},r.a.createElement(Ea.b,{className:"tab-panels__tab-list theme-color-border"},t.map((e,t)=>r.a.createElement(Ea.a,{className:"button button-borderless",key:t},e))),r.a.createElement("div",{className:"tab-panels__panel"},r.a.Children.map(e,(e,t)=>r.a.createElement(Ea.c,{key:t},r.a.createElement("div",{className:"tab-panels__column"},e)))))}}s()(va,"propTypes",{children:q.a.node.isRequired,className:q.a.string,tabNames:q.a.arrayOf(q.a.string).isRequired});var Na=va,fa=()=>null,ba=e=>{var{title:t,slug:a,activeSlug:n,description:o,onChange:s,learnMoreURL:i,renderer:l,children:c}=e,u=r.a.createElement("a",{href:i,onClick:e=>{e.preventDefault(),Object(me.a)(i)}},"Learn more"),d=r.a.Children.toArray(c).filter(e=>e);return r.a.createElement("div",{className:"settings-group"},r.a.createElement(Ut,{headingLevel:3},t),r.a.createElement("div",{className:"settings-items theme-color-border"},d.map(e=>{var{props:{slug:o,title:i}}=e;return r.a.createElement("label",{className:"settings-item theme-color-border",htmlFor:"settings-field-".concat(a,"-").concat(o),key:o},r.a.createElement("div",{className:"settings-item-label"},i),r.a.createElement("div",{className:"settings-item-control"},l({activeSlug:n,groupTitle:t,groupSlug:a,slug:o,title:i,isEnabled:o===n,onChange:s})))})),o&&r.a.createElement("p",null,o," ",i&&u))};ba.propTypes={activeSlug:q.a.string,children:q.a.node,description:q.a.string,learnMoreURL:q.a.string,onChange:q.a.func,renderer:q.a.func,slug:q.a.string,title:q.a.string};var Oa=ba,Ta=e=>{var{groupSlug:t,slug:a,isEnabled:n,onChange:o}=e;return r.a.createElement(Bt,{name:t,value:a,id:"settings-field-".concat(t,"-").concat(a),checked:n,onChange:o})},ya=a(40),wa={logout:E.a.ui.logout,toggleAnalytics:E.a.data.toggleAnalytics},_a=Object(i.b)(e=>({accountName:e.settings.accountName,analyticsEnabled:e.data.analyticsAllowed}),wa)(e=>{var{accountName:t,analyticsEnabled:a,logout:n,toggleAnalytics:o}=e;return r.a.createElement("div",{className:"settings-account"},r.a.createElement(Ut,{headingLevel:3},"Account"),r.a.createElement("div",{className:"settings-items theme-color-border"},r.a.createElement("div",{className:"settings-item theme-color-border"},r.a.createElement("span",{className:"settings-account-name"},t))),r.a.createElement("ul",{className:"dialog-actions"},r.a.createElement("li",null,r.a.createElement("button",{type:"button",className:"button button-borderless",onClick:()=>{Object(me.a)("https://app.simplenote.com/settings/")}},"Edit Account ",r.a.createElement(ya.a,null))),r.a.createElement("li",null,r.a.createElement(Oa,{title:"Privacy",slug:"shareAnalytics",activeSlug:a?"enabled":"",description:"Help us improve Simplenote by sharing usage data with our analytics tool.",onChange:o,learnMoreURL:"https://automattic.com/cookies",renderer:Ta},r.a.createElement(fa,{title:"Share analytics",slug:"enabled"}))),r.a.createElement("li",null,r.a.createElement("button",{type:"button",className:"button button-primary",onClick:n},"Log Out"))))}),Sa=e=>{var{groupSlug:t,slug:a,isEnabled:n,onChange:o}=e;return r.a.createElement(x,{type:"radio",name:t,value:a,id:"settings-field-".concat(t,"-").concat(a),checked:n,onChange:()=>o(a)})};Sa.propTypes={groupSlug:q.a.string,slug:q.a.string,isEnabled:q.a.bool.isRequired,onChange:q.a.func.isRequired};var Aa=Sa,Ra=[{label:"Name: A-Z",type:"alphabetical",isReversed:!1},{label:"Name: Z-A",type:"alphabetical",isReversed:!0},{label:"Created: Newest",type:"creationDate",isReversed:!1},{label:"Created: Oldest",type:"creationDate",isReversed:!0},{label:"Modified: Newest",type:"modificationDate",isReversed:!1},{label:"Modified: Oldest",type:"modificationDate",isReversed:!0}],Ia={setActiveTheme:E.a.settings.activateTheme,setLineLength:E.a.settings.setLineLength,setNoteDisplay:E.a.settings.setNoteDisplay,setSortType:E.a.settings.setSortType,toggleAutoHideMenuBar:E.a.settings.toggleAutoHideMenuBar,toggleSortTagsAlpha:E.a.settings.toggleSortTagsAlpha},Ca=Object(i.b)(e=>{var{settings:t}=e;return{activeTheme:t.theme,autoHideMenuBar:t.autoHideMenuBar,lineLength:t.lineLength,noteDisplay:t.noteDisplay,sortReversed:t.sortReversed,sortTagsAlpha:t.sortTagsAlpha,sortType:t.sortType}},Ia)(e=>r.a.createElement(n.Fragment,null,r.a.createElement(Oa,{title:"Note display",slug:"noteDisplay",activeSlug:e.noteDisplay,onChange:e.setNoteDisplay,renderer:Aa},r.a.createElement(fa,{title:"Comfy",slug:"comfy"}),r.a.createElement(fa,{title:"Condensed",slug:"condensed"}),r.a.createElement(fa,{title:"Expanded",slug:"expanded"})),r.a.createElement(Oa,{title:"Line length",slug:"lineLength",activeSlug:e.lineLength,onChange:e.setLineLength,renderer:Aa},r.a.createElement(fa,{title:"Narrow",slug:"narrow"}),r.a.createElement(fa,{title:"Full",slug:"full"})),r.a.createElement(Oa,{title:"Sort by",slug:"sortType",activeSlug:e.sortReversed?e.sortType+"-reversed":e.sortType,onChange:t=>{var a=t.includes("-reversed"),n=t.split("-");e.setSortType(n[0],a)},renderer:Aa},Ra.map(e=>{var t=e.isReversed?e.type+"-reversed":e.type;return r.a.createElement(fa,{key:t,title:e.label,slug:t})})),r.a.createElement(Oa,{title:"Tags",slug:"sortTagsAlpha",activeSlug:e.sortTagsAlpha?"alpha":"",onChange:e.toggleSortTagsAlpha,renderer:Ta},r.a.createElement(fa,{title:"Sort Alphabetically",slug:"alpha"})),r.a.createElement(Oa,{title:"Theme",slug:"theme",activeSlug:e.activeTheme,onChange:e.setActiveTheme,renderer:Aa},!ve.c&&r.a.createElement(fa,{title:"System",slug:"system"}),r.a.createElement(fa,{title:"Light",slug:"light"}),r.a.createElement(fa,{title:"Dark",slug:"dark"})),ve.b&&!ve.d&&r.a.createElement(Oa,{title:"Menu Bar",slug:"autoHideMenuBar",activeSlug:e.autoHideMenuBar?"autoHide":"",description:"When set to auto-hide, press the Alt key to toggle.",onChange:e.toggleAutoHideMenuBar,renderer:Ta},r.a.createElement(fa,{title:"Hide Automatically",slug:"autoHide"}))));function Da(){return r.a.createElement("svg",{className:"icon-chevron-right-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},r.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),r.a.createElement("path",{d:"M6.87 14.49l-1.49-1.33L9.95 8 5.38 2.84l1.49-1.33L12.62 8 6.87 14.49z"}))}var La=e=>{var{items:t,onClickItem:a}=e;return r.a.createElement("ul",{className:"button-group"},t.map(e=>r.a.createElement("li",{key:e.slug,className:"button-group__item theme-color-border"},r.a.createElement("button",{type:"button",onClick:()=>a(e)},e.name,r.a.createElement(Da,null)))))};La.propTypes={items:q.a.array.isRequired,onClickItem:q.a.func.isRequired};var ka=La,Ma={exportNotes:()=>E.a.data.exportNotes(),requestNotifications:e=>({type:"REQUEST_NOTIFICATIONS",sendNotifications:e}),showImportDialog:()=>Object(te.showDialog)("IMPORT"),toggleShortcuts:()=>E.a.settings.toggleKeyboardShortcuts()},ja=Object(i.b)(e=>{var{settings:{keyboardShortcuts:t,sendNotifications:a}}=e;return{keyboardShortcuts:t,sendNotifications:a}},Ma)(e=>{var{exportNotes:t,keyboardShortcuts:a,requestNotifications:o,sendNotifications:s,showImportDialog:i,toggleShortcuts:l}=e;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"settings-tools"},r.a.createElement(Ut,{headingLevel:3},"Tools"),r.a.createElement(ka,{items:[{name:"Import Notes",slug:"import"},{name:"Export Notes",slug:"export"}],onClickItem:e=>{"import"===e.slug?i():"export"===e.slug&&t()}})),r.a.createElement(Oa,{slug:"keyboardShortcuts",activeSlug:a?"keyboardShortcuts":"",onChange:l,renderer:Ta},r.a.createElement(fa,{title:"Keyboard Shortcuts",slug:"keyboardShortcuts"})),r.a.createElement(Oa,{slug:"allowNotifications",activeSlug:s?"allowNotifications":"",onChange:()=>o(!s),renderer:Ta},r.a.createElement(fa,{title:"Notify on remote changes",slug:"allowNotifications"})))}),xa=["account","display","tools"],Pa=Object(i.b)(null,{closeDialog:te.closeDialog})(e=>{var{closeDialog:t}=e;return r.a.createElement(ot.a,{className:"settings",title:"Settings",onDone:t},r.a.createElement(Na,{tabNames:xa},r.a.createElement(_a,null),r.a.createElement(Ca,null),r.a.createElement(ja,null)))}),Ga=a(562),Ha=a.n(Ga);class Fa extends n.Component{constructor(){super(...arguments),s()(this,"onAddCollaborator",e=>{var{noteId:t}=this.props,a=this.collaboratorElement.value.trim();e.preventDefault(),this.collaboratorElement.value="";var n=this.props.settings.accountName===a;""===a||n||this.props.addCollaborator(t,a)}),s()(this,"onRemoveCollaborator",e=>{var{noteId:t}=this.props;this.props.removeCollaborator(t,e)}),s()(this,"collaborators",()=>{var{note:e}=this.props,t=((null==e?void 0:e.tags)||[]).filter(z.a);return t.reverse(),t}),s()(this,"gravatarURL",e=>{var t=(new Ha.a).update(e.trim().toLowerCase()).digest("hex").toLowerCase();return"https://secure.gravatar.com/avatar/".concat(t,".jpg?s=68")})}render(){var{closeDialog:e}=this.props;return r.a.createElement(ot.a,{className:"settings",title:"Collaborate",onDone:e},r.a.createElement("div",{className:"tab-panels__panel"},r.a.createElement("div",{className:"tab-panels__column"},r.a.createElement("div",{className:"settings-group"},r.a.createElement("p",null,"Add an email address of another Simplenote user to share a note. You'll both be able to edit and view the note."),r.a.createElement("div",{className:"settings-items theme-color-border"},r.a.createElement("form",{className:"settings-item theme-color-border",onSubmit:this.onAddCollaborator},r.a.createElement("input",{className:"settings-item-text-input transparent-input",pattern:"^[^@]+@.+",placeholder:"email@example.com",ref:e=>this.collaboratorElement=e,spellCheck:!1,title:"Please enter a valid email"}),r.a.createElement("div",{className:"settings-item-control"},r.a.createElement("button",{type:"submit",className:"button button-borderless"},"Add Email"))))),r.a.createElement("div",{className:"settings-group"},r.a.createElement("div",{className:"share-collaborators-heading theme-color-border"},r.a.createElement(Ut,{headingLevel:3},"Collaborators")),r.a.createElement("ul",{className:"share-collaborators"},this.collaborators().map(e=>r.a.createElement("li",{key:e,className:"share-collaborator"},r.a.createElement("span",{className:"share-collaborator-photo"},r.a.createElement("img",{src:this.gravatarURL(e),width:"34",height:"34"})),r.a.createElement("span",{className:"share-collaborator-name"},e),r.a.createElement("button",{className:"share-collaborator-remove button button-borderless button-danger",onClick:this.onRemoveCollaborator.bind(this,e)},"Remove"))))))))}}var Va={addCollaborator:E.a.data.addCollaborator,closeDialog:E.a.ui.closeDialog,editNote:E.a.data.editNote,publishNote:E.a.data.publishNote,removeCollaborator:E.a.data.removeCollaborator},Ua=Object(i.b)(e=>{var{data:t,settings:a,ui:{openedNote:n}}=e;return{settings:a,noteId:n,note:t.notes.get(n)}},Va)(Fa),Ba={trashTag:e=>({type:"TRASH_TAG",tagName:e}),closeDialog:E.a.ui.closeDialog},Wa=Object(i.b)(null,Ba)(e=>{var{closeDialog:t,tagName:a,trashTag:n}=e;return r.a.createElement(ot.a,{className:"trash-tag-confirmation",onDone:t,title:"Delete Tag"},r.a.createElement("div",{className:"dialog-inner-content"},'Are you sure you want to delete "',r.a.createElement("span",{className:"tag-name"},a),'"?'),r.a.createElement("div",{className:"dialog-buttons"},r.a.createElement("button",{autoFocus:!0,className:"button-primary delete-tag",onClick:()=>n(a)},"Delete Tag")))});class za extends n.Component{render(){var{theme:e,closeDialog:t,dialogs:a}=this.props;return r.a.createElement(n.Fragment,null,a.map(e=>r.a.createElement(c.a,{key:e.type,className:"dialog-renderer__content",contentLabel:e.type,isOpen:!0,onRequestClose:t,overlayClassName:"dialog-renderer__overlay",portalClassName:"dialog-renderer__portal",shouldCloseOnOverlayClick:!1},"ABOUT"===e.type?r.a.createElement(at.a,{key:"about",closeDialog:t}):"BETA-WARNING"===e.type?r.a.createElement(lt,{key:"beta-warning"}):"CLOSE-WINDOW-CONFIRMATION"===e.type?r.a.createElement(It,{key:"close-window-confirmation"}):"IMPORT"===e.type?r.a.createElement(ca,{key:"import"}):"KEYBINDINGS"===e.type?r.a.createElement(pa,{key:"keybindings"}):"LOGOUT-CONFIRMATION"===e.type?r.a.createElement(ga,{key:"logout-confirmation"}):"SETTINGS"===e.type?r.a.createElement(Pa,{key:"settings"}):"SHARE"===e.type?r.a.createElement(Ua,{key:"share"}):"TRASH-TAG-CONFIRMATION"===e.type?r.a.createElement(Wa,{key:"trash-tag-confirmation",tagName:e.tagName}):null)))}}s()(za,"displayName","DialogRenderer");var Ka={closeDialog:te.closeDialog},qa=Object(i.b)(e=>({dialogs:e.ui.dialogs,theme:Object(f.b)(e)}),Ka)(za),Ya=a(84),Qa=a(76),Za={dismiss:()=>E.a.ui.dismissEmailVerifyDialog()},Ja=Object(i.b)(e=>({accountVerification:e.data.accountVerification,email:e.settings.accountName,theme:f.b(e)}),Za)(e=>{var{accountVerification:t,dismiss:a,email:o,theme:s}=e,i=btoa(o||""),l="https://app.simplenote.com/account/verify-email/".concat(i);"pending"===t?Object(Qa.b)("verification_verify_screen_viewed"):Object(Qa.b)("verification_review_screen_viewed");var u=r.a.createElement("div",{className:"email-verification__dismiss"},r.a.createElement("button",{className:"icon-button","aria-label":"Close dialog",onClick:a},r.a.createElement(rt.a,null))),d=r.a.createElement(n.Fragment,null,u,r.a.createElement("span",{className:"theme-color-fg-dim"},r.a.createElement(Gt.a,null)),r.a.createElement("h2",null,"Review Your Account"),r.a.createElement("p",null,"You are registered with Simplenote using the email:"),r.a.createElement("p",{className:"email-verification__email"},r.a.createElement("strong",null,o)),r.a.createElement("p",null,"Improvements to account security may result in account loss if you no longer have access to this email address."),r.a.createElement("div",{className:"email-verification__button-row button-borderless"},r.a.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://app.simplenote.com/settings",onClick:()=>Object(Qa.b)("verification_change_email_button_tapped")},r.a.createElement("button",{className:"button button-borderless"},"Change Email")),r.a.createElement("a",{target:"_blank",rel:"noreferrer",href:l,onClick:()=>Object(Qa.b)("verification_confirm_button_tapped")},r.a.createElement("button",{className:"button button-primary"},"Confirm")))),m=r.a.createElement(n.Fragment,null,u,r.a.createElement("span",{className:"theme-color-fg-dim"},r.a.createElement(Ya.a,null)),r.a.createElement("h2",null,"Verify Your Email"),r.a.createElement("p",null,"We’ve sent a verification email to ",r.a.createElement("strong",null,o),"."),r.a.createElement("p",null,"Please check your inbox and follow the instructions."),r.a.createElement("div",{className:"email-verification__button-row"},r.a.createElement("a",{target:"_blank",rel:"noreferrer",href:l,onClick:()=>Object(Qa.b)("verification_resend_email_button_tapped")},r.a.createElement("button",{className:"button button-borderless"},"Resend Email"))));return r.a.createElement(c.a,{key:"email-verification",className:"email-verification__modal theme-color-fg theme-color-bg",isOpen:!0,onRequestClose:a,contentLabel:"Confirm your email",overlayClassName:"email-verification__overlay",portalClassName:_()("email-verification__portal")},"pending"===t?m:d)}),Xa={dismiss:()=>E.a.ui.showAlternateLoginPrompt(!1),logout:E.a.ui.logout},$a=Object(i.b)(e=>({alternateLoginEmail:e.ui.alternateLoginEmail,email:e.settings.accountName,theme:f.b(e)}),Xa)(e=>{var{alternateLoginEmail:t,dismiss:a,email:n,logout:o,theme:s}=e,i=r.a.createElement("div",{className:"alternate-login__dismiss"},r.a.createElement("button",{className:"icon-button","aria-label":"Close dialog",onClick:a},r.a.createElement(rt.a,null))),l=r.a.createElement(r.a.Fragment,null,i,r.a.createElement("span",{className:"theme-color-fg-dim"},r.a.createElement(Gt.a,null)),r.a.createElement("h2",null,"Logout?"),r.a.createElement("p",null,"You are already logged in as:"),r.a.createElement("p",{className:"alternate-login__email"},r.a.createElement("strong",null,n)),r.a.createElement("p",null,"You tried logging in with:"),r.a.createElement("p",{className:"alternate-login__email"},r.a.createElement("strong",null,t)),r.a.createElement("p",null,"Would you like to log out?"),r.a.createElement("div",{className:"alternate-login__button-row button-borderless"},r.a.createElement("a",{target:"_blank",rel:"noreferrer",onClick:a},r.a.createElement("button",{className:"button button-borderless"},"Cancel")),r.a.createElement("a",{target:"_blank",rel:"noreferrer",onClick:o},r.a.createElement("button",{className:"button button-primary"},"Logout"))));return r.a.createElement(c.a,{key:"alternate-login",className:"alternate-login__modal theme-color-fg theme-color-bg",isOpen:!0,onRequestClose:a,contentLabel:"Log out?",overlayClassName:"alternate-login__overlay",portalClassName:_()("alternate-login__portal")},l)}),en=a(458);class tn extends n.Component{constructor(){super(...arguments),s()(this,"handleShortcut",e=>{var{hotkeysEnabled:t}=this.props,a=!window.electron;if(a&&this.handleBrowserSearchShortcut(e),t){var{ctrlKey:n,metaKey:r,shiftKey:o}=e,s=e.key.toLowerCase();return(n||r)&&n!==r&&o&&"u"===s?(this.props.toggleTagList(),e.stopPropagation(),e.preventDefault(),!1):("Escape"!==s&&"Esc"!==s||!this.props.isSearchActive||this.props.clearSearch(),a&&this.handleBrowserShortcut(e),!0)}}),s()(this,"handleBrowserShortcut",e=>{var{ctrlKey:t,metaKey:a,shiftKey:n}=e,r=e.key.toLowerCase(),o=(t||a)&&t!==a;return o&&n&&"i"===r?(this.props.createNote(),e.stopPropagation(),e.preventDefault(),!1):o&&n&&"f"===r?(this.props.toggleFocusMode(),e.stopPropagation(),e.preventDefault(),!1):void 0}),s()(this,"handleBrowserSearchShortcut",e=>{var{ctrlKey:t,metaKey:a,shiftKey:n}=e,r=e.key.toLowerCase(),o=(t||a)&&t!==a;if(o&&n&&"s"===r||o&&!n&&"f"===r)return this.props.focusSearchField(),e.stopPropagation(),e.preventDefault(),!1;!o||"g"!==r&&"f"!==r||(e.stopPropagation(),e.preventDefault())}),s()(this,"toggleShortcuts",e=>{e?window.addEventListener("keydown",this.handleShortcut,!0):window.removeEventListener("keydown",this.handleShortcut,!0)})}componentDidMount(){var e;null===(e=window.electron)||void 0===e||e.send("setAutoHideMenuBar",this.props.autoHideMenuBar),document.body.dataset.theme=this.props.theme,this.toggleShortcuts(!0),Object(Qa.b)("application_opened")}componentDidUpdate(){document.body.dataset.theme=this.props.theme}componentWillUnmount(){this.toggleShortcuts(!1),delete document.body.dataset.theme}render(){var{isDevConfig:e,lineLength:t,showAlternateLoginPrompt:a,showEmailVerification:n,showNavigation:o,showNoteActions:s,showNoteInfo:i,showRevisions:l,theme:c}=this.props,u=_()("app",{"is-line-length-full":"full"===t,"touch-enabled":"ontouchstart"in document.body}),d=_()("simplenote-app",{"navigation-open":o,"is-electron":ve.b,"is-macos":ve.b&&ve.d});return r.a.createElement("div",{className:u},n&&r.a.createElement(Ja,null),a&&r.a.createElement($a,null),e&&r.a.createElement(tt,{"aria-hidden":!(!o&&!l)||void 0}),r.a.createElement("div",{className:d},o&&r.a.createElement(ge,null),r.a.createElement(et,null),i&&r.a.createElement(y,null),s&&r.a.createElement(F,null)),r.a.createElement(qa,{appProps:this.props}))}}s()(tn,"displayName","App");var an=Object(i.b)(e=>({autoHideMenuBar:e.settings.autoHideMenuBar,hotkeysEnabled:e.settings.keyboardShortcuts,isSearchActive:!!e.ui.searchQuery.length,isSmallScreen:f.d(e),lineLength:e.settings.lineLength,showAlternateLoginPrompt:e.ui.showAlternateLoginPrompt,showEmailVerification:f.j(e),showNavigation:e.ui.showNavigation,showNoteActions:e.ui.showNoteActions,showNoteInfo:e.ui.showNoteInfo,showRevisions:e.ui.showRevisions,theme:f.b(e)}),e=>({activateTheme:t=>e(en.activateTheme(t)),clearSearch:()=>e(Object(te.search)("")),closeNote:()=>e(Object(te.closeNote)()),createNote:()=>e(Object(te.createNote)()),focusSearchField:()=>e(E.a.ui.focusSearchField()),setLineLength:t=>e(en.setLineLength(t)),setNoteDisplay:t=>e(en.setNoteDisplay(t)),setSortType:t=>e(en.setSortType(t)),toggleAutoHideMenuBar:()=>e(en.toggleAutoHideMenuBar()),toggleFocusMode:()=>e(en.toggleFocusMode()),toggleSortOrder:()=>e(en.toggleSortOrder()),toggleSortTagsAlpha:()=>e(en.toggleSortTagsAlpha()),toggleSpellCheck:()=>e(en.toggleSpellCheck()),toggleTagList:()=>e(Object(te.toggleNavigation)())}))(tn),nn=a(96),rn=a(22),on=a.n(rn),sn=a(71),ln=a(574),cn=a.n(ln);function un(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function dn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?un(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):un(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var mn=!0,pn=()=>{mn=!1},hn=()=>new Promise((e,t)=>{var a=indexedDB.open("simplenote_v2",2020065);a.onsuccess=()=>e(a.result),a.onerror=()=>t(),a.onupgradeneeded=()=>{var e=a.result;e.objectStoreNames.contains("state")||e.createObjectStore("state"),e.objectStoreNames.contains("revisions")||e.createObjectStore("revisions")},a.onblocked=()=>t()}),gn=e=>hn().then(t=>new Promise(a=>{var n=!0,r=t.transaction(["state","revisions"],"readonly");t.onversionchange=()=>{n=!1,a([{},vn])};var o=r.objectStore("state").get("state");o.onsuccess=()=>{if(n){var t=o.result;if(t)try{var s;if(null!==e&&t.accountName!==e)return void a([{},vn]);var i=new Map(t.noteTags.map(e=>{var[t,a]=e;return[t,new Set(a)]})),l={data:{analyticsAllowed:null!==(s=t.allowAnalytics)&&void 0!==s?s:null,notes:new Map(t.notes),noteTags:i,tags:new Map(t.tags)},settings:{accountName:t.accountName},simperium:{ghosts:[new Map(t.cvs),new Map(t.ghosts)],lastRemoteUpdate:new Map(t.lastRemoteUpdate),lastSync:new Map(t.lastSync)}};"preferences"in t?l.data.preferences=new Map(t.preferences):(l.simperium.ghosts[0].delete("preferences"),l.simperium.ghosts[1].delete("preferences"));var c=r.objectStore("revisions").openCursor(),u=new Map;c.onsuccess=()=>{if(n){var e=c.result;e?(u.set(e.key,new Map(e.value)),e.continue()):a([dn(dn({},l),{},{data:dn(dn({},l.data),{},{noteRevisions:u})}),vn])}else a([l,vn])},c.onerror=()=>a([l,vn])}catch(e){a([{},vn])}else a([{},vn])}else a([{},vn])},o.onerror=()=>a([{},vn])})).catch(()=>[{},null]),En=function(){var e=Xt()((function*(e,t){var a=(yield hn()).transaction("revisions","readwrite"),n=a.objectStore("revisions").get(e);n.onsuccess=()=>{var r,o=n.result,s=null!==(r=null==o?void 0:o.slice())&&void 0!==r?r:[],i=new Set(s.map(e=>{var[t]=e;return t}));t.forEach(e=>{var[t,a]=e;i.has(t)||(s.push([t,a]),i.add(t))}),s.sort((e,t)=>e[0]-t[0]),a.objectStore("revisions").put(s,e)},n.onerror=()=>{a.objectStore("revisions").put(t,e)}}));return function(t,a){return e.apply(this,arguments)}}(),vn=e=>{var{dispatch:t,getState:a}=e;return e=>{var t=null;return n=>{var r=e(n);return t&&clearTimeout(t),mn&&(t=setTimeout(()=>mn&&(e=>{var t=Array.from(e.data.notes),a=Array.from(e.data.noteTags).map(e=>{var[t,a]=e;return[t,Array.from(a)]}),n=Array.from(e.data.preferences),r=Array.from(e.data.tags),o=Array.from(e.simperium.ghosts[0]),s=Array.from(e.simperium.ghosts[1]),i=Array.from(e.simperium.lastRemoteUpdate),l=Array.from(e.simperium.lastSync),c={accountName:e.settings.accountName,allowAnalytics:e.data.analyticsAllowed,notes:t,noteTags:a,preferences:n,tags:r,cvs:o,ghosts:s,lastRemoteUpdate:i,lastSync:l};return hn().then(e=>{e.transaction("state","readwrite").objectStore("state").put(c,"state")})})(a()),1e3)),"LOAD_REVISIONS"===n.type&&n.revisions.length>0&&En(n.noteId,n.revisions),r}}},Nn=a(579);function fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function bn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var On=e=>t=>a=>{var n=e.getState();switch(a.type){case"CREATE_NOTE":var r,o,s,i,l,c,u,d,m=Object(Nn.v4)(),p=n.ui.filteredNotes[0],h=p&&n.data.notes.get(p),g=null==h?void 0:h.systemTags.includes("markdown"),E=null!==(r=null===(o=a.note)||void 0===o||null===(s=o.systemTags)||void 0===s?void 0:s.indexOf("markdown"))&&void 0!==r?r:-1,v=null!==(i=null===(l=a.note)||void 0===l||null===(c=l.systemTags)||void 0===c?void 0:c.slice())&&void 0!==i?i:[];g&&-1===E?v.push("markdown"):!g&&E>=0&&v.splice(E,1);var N=Object(f.i)(n),b=null!==(u=null===(d=a.note)||void 0===d?void 0:d.tags)&&void 0!==u?u:[],O=N?Object(ae.c)(b,N):b;return t({type:"CREATE_NOTE_WITH_ID",noteId:m,note:bn(bn({},a.note),{},{systemTags:v,tags:O}),meta:{nextNoteToOpen:m}});case"DELETE_OPEN_NOTE_FOREVER":if(!n.ui.openedNote)return;return t({type:"DELETE_NOTE_FOREVER",noteId:n.ui.openedNote});case"EMPTY_TRASH":var T=t(a);return n.data.notes.forEach((t,a)=>{t.deleted&&e.dispatch({type:"DELETE_NOTE_FOREVER",noteId:a})}),T;case"EXPORT_NOTES":return wt(n.data.notes),t(a);case"IMPORT_NOTE":return t({type:"IMPORT_NOTE_WITH_ID",noteId:Object(Nn.v4)(),note:a.note});case"RESTORE_OPEN_NOTE":if(!n.ui.openedNote)return;return t({type:"RESTORE_NOTE",noteId:n.ui.openedNote});case"TOGGLE_ANALYTICS":return t({type:"SET_ANALYTICS",allowAnalytics:!n.data.analyticsAllowed});case"TRASH_OPEN_NOTE":if(!n.ui.openedNote)return;return t({type:"TRASH_NOTE",noteId:n.ui.openedNote});case"TRASH_TAG":return n.data.tags.has(Object(ae.a)(a.tagName))?t(bn(bn({},a),{},{remainingTags:Object(f.h)(n)-1})):null;default:return t(a)}},Tn=a(113),yn=a.n(Tn),wn=yn()("electron-middleware"),_n=e=>{var{dispatch:t,getState:a}=e;return window.electron.receive("tokenLogin",e=>{var{searchParams:n}=new URL(e),r=n.get("email");r!==a().settings.accountName&&t(E.a.ui.showAlternateLoginPrompt(r))}),window.electron.receive("appCommand",e=>{switch(e.action){case"closeWindow":return void t(E.a.ui.closeWindow());case"emptyTrash":return void t(E.a.ui.emptyTrash());case"exportNotes":return void t(E.a.data.exportNotes());case"logout":return void t({type:"LOGOUT"});case"printNote":return void window.print();case"activateTheme":return void t(E.a.settings.activateTheme(e.theme));case"focusSearchField":return void t(E.a.ui.focusSearchField());case"showDialog":return void t(E.a.ui.showDialog(e.dialog));case"trashNote":return void t(E.a.ui.trashOpenNote());case"newNote":return void t(E.a.ui.createNote());case"setLineLength":return void t(E.a.settings.setLineLength(e.lineLength));case"setNoteDisplay":return void t(E.a.settings.setNoteDisplay(e.noteDisplay));case"setSortType":return void t(E.a.settings.setSortType(e.sortType));case"toggleFocusMode":return void t(E.a.settings.toggleFocusMode());case"toggleSortOrder":return void t(E.a.settings.toggleSortOrder());case"toggleSortTagsAlpha":return void t(E.a.settings.toggleSortTagsAlpha());case"toggleSpellCheck":return void t(E.a.settings.toggleSpellCheck());default:wn("unknown AppCommand: ".concat(e))}}),window.electron.send("appStateUpdate",{settings:a().settings,editMode:a().ui.editMode}),e=>t=>{var n=a(),r=e(t),o=a();switch(t.type){case"REALLY_CLOSE_WINDOW":return window.electron.send("reallyCloseWindow"),r}return n.settings===o.settings&&n.ui.editMode===o.ui.editMode||window.electron.send("appStateUpdate",{settings:o.settings,editMode:o.ui.editMode}),r}},Sn=a(472);function An(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Rn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?An(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):An(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var In=e=>t=>a=>{var n,r,o,s;switch(a.type){case"SELECT_NOTE_ABOVE":var{ui:{filteredNotes:i,openedNote:l}}=e.getState();if(0===i.length)return;if(!l)return t({type:"SELECT_NOTE",noteId:i[0]});var c=i.findIndex(e=>e===l);if(0===c)return;return t({type:"SELECT_NOTE",noteId:-1===c?i[0]:i[c-1]});case"SELECT_NOTE_BELOW":var{ui:{filteredNotes:u,openedNote:d}}=e.getState();if(0===u.length)return;if(!d)return t({type:"SELECT_NOTE",noteId:u[0]});var m=u.findIndex(e=>e===d);if(m===u.length-1)return;return t({type:"SELECT_NOTE",noteId:-1===m?u[0]:u[m+1]});case"SHOW_ALL_NOTES":case"SHOW_UNTAGGED_NOTES":case"SELECT_TRASH":return t(Rn(Rn({},a),{},{meta:Rn(Rn({},a.meta),{},{nextNoteToOpen:null!==(n=null===(r=a.meta)||void 0===r||null===(o=r.searchResults)||void 0===o?void 0:o.noteIds[0])&&void 0!==n?n:null})}));case"REQUEST_NOTIFICATIONS":if(a.sendNotifications&&"default"===(null===(s=window.Notification)||void 0===s?void 0:s.permission)){var p,h=()=>e.dispatch({type:"REQUEST_NOTIFICATIONS",sendNotifications:!0}),g=null===(p=window.Notification)||void 0===p?void 0:p.requestPermission(h);"function"==typeof g.then&&g.then(h)}return t(a);default:return t(a)}},Cn=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Dn=()=>window.innerWidth,Ln=Object(sn.c)({windowWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn(),t=arguments.length>1?arguments[1]:void 0;return"WINDOW_RESIZE"===t.type?t.innerWidth:e},systemTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn(),t=arguments.length>1?arguments[1]:void 0;return"SYSTEM_THEME_UPDATE"===t.type?t.prefers:e}}),kn=e=>{var{dispatch:t}=e;return window.addEventListener("resize",()=>t({type:"WINDOW_RESIZE",innerWidth:Dn()})),window.matchMedia("(prefers-color-scheme: dark)").addListener(()=>t({type:"SYSTEM_THEME_UPDATE",prefers:Cn()})),e=>e};function Mn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function jn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xn=e=>jn(jn({},e),{},{modificationDate:Date.now()/1e3}),Pn=Object(sn.c)({accountVerification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1?arguments[1]:void 0;return"UPDATE_ACCOUNT_VERIFICATION"===t.type&&"dismissed"!==e?t.state:e},analyticsAllowed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_ANALYTICS_UPDATE":case"SET_ANALYTICS":return t.allowAnalytics;default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var a=e.get(t.noteId);if(!a)return e;var n="ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName,r=Object(ae.c)(a.tags,n);return r!==a.tags?new Map(e).set(t.noteId,xn(jn(jn({},a),{},{tags:r}))):e;case"CREATE_NOTE_WITH_ID":return new Map(e).set(t.noteId,jn({content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]},t.note));case"DELETE_NOTE_FOREVER":case"NOTE_BUCKET_REMOVE":case"REMOTE_NOTE_DELETE_FOREVER":if(!e.has(t.noteId))return e;var o=new Map(e);return o.delete(t.noteId),o;case"EDIT_NOTE":var s,i=null!==(s=e.get(t.noteId))&&void 0!==s?s:{content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]};return new Map(e).set(t.noteId,xn(jn(jn({},i),t.changes)));case"NOTE_BUCKET_UPDATE":case"REMOTE_NOTE_UPDATE":case"RESTORE_NOTE_REVISION":case"IMPORT_NOTE_WITH_ID":return new Map(e).set(t.noteId,t.note);case"MARKDOWN_NOTE":if(!e.has(t.noteId))return e;var l=e.get(t.noteId),c=l.systemTags.includes("markdown");if(c===t.shouldEnableMarkdown)return e;var u=t.shouldEnableMarkdown?[...l.systemTags,"markdown"]:l.systemTags.filter(e=>"markdown"!==e);return new Map(e).set(t.noteId,xn(jn(jn({},l),{},{systemTags:u})));case"PIN_NOTE":if(!e.has(t.noteId))return e;var d=e.get(t.noteId),m=d.systemTags.includes("pinned");if(m===t.shouldPin)return e;var p=t.shouldPin?[...d.systemTags,"pinned"]:d.systemTags.filter(e=>"pinned"!==e);return new Map(e).set(t.noteId,xn(jn(jn({},d),{},{systemTags:p})));case"PUBLISH_NOTE":if(!e.has(t.noteId))return e;var h=e.get(t.noteId),g=h.systemTags.includes("published");if(g===t.shouldPublish)return e;var E=t.shouldPublish?[...h.systemTags,"published"]:h.systemTags.filter(e=>"published"!==e);return new Map(e).set(t.noteId,xn(jn(jn({},h),{},{systemTags:E})));case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":var v=e.get(t.noteId);if(!v)return e;var N="REMOVE_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName,f=Object(ae.d)(v.tags,N);return f!==v.tags?new Map(e).set(t.noteId,xn(jn(jn({},v),{},{tags:f}))):e;case"RENAME_TAG":var b=Object(ae.a)(t.oldTagName),O=Object(ae.a)(t.newTagName),T=new Map(e);return b===O||T.forEach((e,a)=>{var n=[],r=new Set,o=!1;e.tags.forEach(e=>{var a=Object(ae.a)(e);o=o||a===b||a===O,r.has(a)||(b!==a&&(r.add(a),n.push(e)),r.has(O)||(r.add(O),n.push(t.newTagName)))}),o&&T.set(a,xn(jn(jn({},e),{},{tags:n})))}),T;case"RESTORE_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,xn(jn(jn({},e.get(t.noteId)),{},{deleted:!1}))):e;case"TRASH_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,xn(jn(jn({},e.get(t.noteId)),{},{deleted:!0}))):e;case"TRASH_TAG":var y=new Map(e),w=!1;return y.forEach((e,a)=>{var n=Object(ae.d)(e.tags,t.tagName);n!==e.tags&&(w=!0,y.set(a,xn(jn(jn({},e),{},{tags:n}))))}),w?y:e;default:return e}},noteRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_REVISIONS":var a,n=null!==(a=e.get(t.noteId))&&void 0!==a?a:new Map,r=new Map(n);return t.revisions.forEach(e=>{var[t,a]=e;return r.set(t,a)}),new Map(e).set(t.noteId,r);default:return e}},noteTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var a,n=Object(ae.a)("ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName);return new Map(e).set(n,(null!==(a=e.get(n))&&void 0!==a?a:new Set).add(t.noteId));case"EDIT_NOTE":case"IMPORT_NOTE_WITH_ID":var r="EDIT_NOTE"===t.type?t.changes.tags:t.note.tags;if(null==r||!r.length)return e;var{noteId:o}=t,s=new Set(r.map(ae.a)),i=new Map(e);return i.forEach((e,t)=>{if(e.has(o)&&!s.has(t)){var a=new Set(e);return a.delete(o),void i.set(t,a)}!e.has(o)&&s.has(t)&&i.set(t,new Set(e).add(o))}),i;case"TAG_REFRESH":return t.noteTags;case"REMOTE_TAG_DELETE":case"TAG_BUCKET_REMOVE":var l=new Map(e);return l.delete(t.tagHash)?l:e;case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":var c=Object(ae.a)("REMOVE_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName),u=e.get(c);if(!u)return e;var d=new Set(u);return d.delete(t.noteId)?new Map(e).set(c,d):e;case"TRASH_TAG":var m=new Map(e);return m.delete(Object(ae.a)(t.tagName))?m:e;default:return e}},preferences:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ANALYTICS":return new Map(t).set("preferences-key",jn(jn({},null!==(e=t.get("preferences-key"))&&void 0!==e?e:{}),{},{analytics_enabled:a.allowAnalytics}));case"PREFERENCES_BUCKET_REMOVE":var n=new Map(t);return n.delete(a.id)?n:t;case"PREFERENCES_BUCKET_UPDATE":return new Map(t).set(a.id,a.data);default:return t}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var a="ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName;return e.has(Object(ae.a)(a))?e:new Map(e).set(Object(ae.a)(a),{name:a});case"EDIT_NOTE":case"IMPORT_NOTE_WITH_ID":var n="EDIT_NOTE"===t.type?t.changes.tags:t.note.tags;if(null==n||!n.length)return e;var r=new Map(e),o=!1;return n.forEach(t=>{var a=Object(ae.a)(t);e.has(a)||(r.set(a,{name:t}),o=!0)}),o?r:e;case"REMOTE_TAG_DELETE":case"TAG_BUCKET_REMOVE":var s=new Map(e);return s.delete(t.tagHash)?s:e;case"REMOTE_TAG_UPDATE":case"TAG_BUCKET_UPDATE":return new Map(e).set(t.tagHash,t.tag);case"RENAME_TAG":var i,l=Object(ae.a)(t.oldTagName),c=Object(ae.a)(t.newTagName),u=new Map(e),d=null!==(i=e.get(l))&&void 0!==i?i:{};return u.set(c,jn(jn({},d),{},{name:t.newTagName})),l!==c&&u.delete(l),u;case"REORDER_TAG":var m=Object(ae.a)(t.tagName),p=e.get(m);if(!p)return e;var h=new Map(e);return h.delete(m),[...h.entries()].sort((e,t)=>void 0!==e[1].index&&void 0!==t[1].index?e[1].index-t[1].index:void 0===e[1].index?1:-1).forEach((e,a)=>{var[n,r]=e;h.set(n,jn(jn({},r),{},{index:a<t.newIndex?a:a+1}))}),h.set(m,jn(jn({},p),{},{index:t.newIndex})),h;case"TAG_REFRESH":var g=new Map(e);return t.noteTags.forEach((e,t)=>{g.has(t)||g.set(t,{name:Object(ae.b)(t)})}),g;case"RESTORE_NOTE_REVISION":var E=new Map(e);return t.note.tags.forEach(e=>{var t=Object(ae.a)(e);E.has(t)||E.set(t,{name:e})}),E;case"TRASH_TAG":var v=new Map(e);return v.delete(Object(ae.a)(t.tagName))?v:e;default:return e}}}),Gn=Object(sn.c)({accountName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAccountName":return t.accountName;default:return e}},autoHideMenuBar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAutoHideMenuBar":return t.autoHideMenuBar;case"TOGGLE_AUTO_HIDE_MENU_BAR":return!e;default:return e}},focusModeEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setFocusMode":return t.focusModeEnabled;case"TOGGLE_FOCUS_MODE":return!e;default:return e}},keyboardShortcuts:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"KEYBOARD_SHORTCUTS_TOGGLE":return!e;default:return e}},lineLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"narrow",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setLineLength":return t.lineLength;default:return e}},markdownEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SYSTEM_TAG":return"markdown"===t.tagName?t.shouldHaveTag:e;default:return e}},noteDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"comfy",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNoteDisplay":return t.noteDisplay;default:return e}},sendNotifications:function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"granted"===(null===(e=window.Notification)||void 0===e?void 0:e.permission),r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"REQUEST_NOTIFICATIONS":return!!r.sendNotifications&&"granted"===(null===(t=window.Notification)||void 0===t?void 0:t.permission);default:return n&&"granted"===(null===(a=window.Notification)||void 0===a?void 0:a.permission)}},sortReversed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortReversed":return t.sortReversed;case"setSortType":return void 0!==t.sortReversed?t.sortReversed:e;case"TOGGLE_SORT_ORDER":return!e;default:return e}},sortTagsAlpha:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortTagsAlpha":return t.sortTagsAlpha;case"TOGGLE_SORT_TAGS_ALPHA":return!e;default:return e}},sortType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"modificationDate",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortType":return t.sortType;default:return e}},spellCheckEnabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSpellCheck":return t.spellCheckEnabled;case"TOGGLE_SPELLCHECK":return!e;default:return e}},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setTheme":return t.theme;default:return e}}}),Hn=new Map,Fn=Object(sn.c)({connectionStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.onLine?"red":"offline",t=arguments.length>1?arguments[1]:void 0;return"CHANGE_CONNECTION_STATUS"===t.type?t.status:e},ghosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Map,new Map],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GHOST_REMOVE_ENTITY":var a,[n,r]=e,o=null!==(a=r.get(t.bucketName))&&void 0!==a?a:new Map,s=new Map(o);return s.delete(t.entityId),[n,new Map(r).set(t.bucketName,s)];case"GHOST_SET_CHANGE_VERSION":var[i,l]=e,c=new Map(i).set(t.bucketName,t.version);return[c,l];case"GHOST_SET_ENTITY":var u,[d,m]=e,p=null!==(u=m.get(t.bucketName))&&void 0!==u?u:new Map,h=new Map(p).set(t.entityId,t.ghost);return[d,new Map(m).set(t.bucketName,h)];default:return e}},lastSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACKNOWLEDGE_PENDING_CHANGE":return new Map(e).set(t.entityId,Date.now());case"REMOTE_NOTE_UPDATE":return new Map(e).set(t.noteId,Date.now());default:return e}},lastRemoteUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_NOTE_UPDATE":return t.remoteInfo?new Map(e).set(t.noteId,Date.now()):e;default:return e}}}),Vn=a(314);function Un(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Bn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Un(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Wn=[],zn=Object(sn.c)({collection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"all"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NOTE_WITH_ID":return"trash"===e.type?{type:"all"}:"tag"===e.type?{type:"tag",tagName:e.tagName}:e;case"OPEN_TAG":return{type:"tag",tagName:t.tagName};case"RENAME_TAG":return"tag"===e.type&&e.tagName===t.oldTagName?{type:"tag",tagName:t.newTagName}:e;case"SELECT_TRASH":return{type:"trash"};case"SHOW_ALL_NOTES":return{type:"all"};case"SHOW_UNTAGGED_NOTES":return{type:"untagged"};case"TRASH_TAG":var a="tag"===e.type&&Object(ae.a)(e.tagName)===Object(ae.a)(t.tagName),n="untagged"===e.type&&0===(null==t?void 0:t.remainingTags);return a||n?{type:"all"}:e;default:return e}},alternateLoginEmail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALTERNATE_LOGIN_PROMPT":return t.email?atob(t.email):null;case"HIDE_ALTERNATE_LOGIN_PROMPT":return null;default:return e}},dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_DIALOG":return e.slice(0,-1);case"TRASH_TAG":return e.filter(e=>"TRASH-TAG-CONFIRMATION"!==e.type);case"REMOTE_TAG_DELETE":return e.filter(e=>!("TRASH-TAG-CONFIRMATION"===e.type&&Object(ae.a)(e.tagName)===t.tagHash));case"SHOW_DIALOG":var{type:a,name:n}=t,r=j()(t,["type","name"]);return e.find(e=>e.type===n)?e:[...e,Bn({type:n},r)];default:return e}},editMode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_EDIT_MODE":return!e;case"CREATE_NOTE_WITH_ID":return!0;default:return e}},editorSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_NOTE_UPDATE":var a,n,r;if("d"!==(null===(a=t.remoteInfo)||void 0===a||null===(n=a.patch)||void 0===n||null===(r=n.content)||void 0===r?void 0:r.o)||!e.has(t.noteId))return e;var[o,s,i]=e.get(t.noteId),l=t.remoteInfo.patch.content.v.split("\t"),c=t.remoteInfo.original.content,u=Object(Vn.c)(Object(Vn.b)(c).slice(0,o)).length,d=Object(Vn.c)(Object(Vn.b)(c).slice(0,s)).length,[m,p]=l.reduce((e,t)=>{var[a,n,r]=e;if(r>a&&r>n)return e;var o=t[0],s=t.slice(1);switch(o){case"=":return[a,n,r+parseInt(s,10)];case"-":var i=parseInt(s,10);return[a>r?a-i:a,n>r?n-i:n,r];case"+":var l=decodeURIComponent(s).length;return[a>r?a+l:a,n>r?n+l:n,r];default:return e}},[u,d,0]),h=Object(Vn.b)(t.note.content.slice(0,m)).length,g=Object(Vn.b)(t.note.content.slice(0,p)).length;return new Map(e).set(t.noteId,[h,g,i]);case"STORE_EDITOR_SELECTION":return new Map(e).set(t.noteId,[t.start,t.end,t.direction]);default:return e}},editingTags:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TAG_EDITING_TOGGLE":return!e;case"OPEN_NOTE":case"SELECT_NOTE":case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"SHOW_UNTAGGED_NOTES":case"NAVIGATION_TOGGLE":return!1;default:return e}},filteredNotes:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,a=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=a.meta)||void 0===e?void 0:e.searchResults)?t:a.meta.searchResults.noteIds},hasLoadedNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER_NOTES":return!0;default:return e}},numberOfMatchesInNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_NUMBER_OF_MATCHES_IN_NOTE":return t.matches;default:return e}},openedNote:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CLOSE_NOTE":return null;case"OPEN_NOTE":return null!==(e=null==n?void 0:n.noteId)&&void 0!==e?e:a;case"SELECT_NOTE":return n.noteId;default:return void 0!==(null===(t=n.meta)||void 0===t?void 0:t.nextNoteToOpen)?n.meta.nextNoteToOpen:a}},openedRevision:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_REVISION":case"RESTORE_NOTE_REVISION":return null;case"OPEN_REVISION":return[t.noteId,t.version];default:return e}},restoreDeletedTags:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_RESTORING_DELETED_TAGS":return!e;case"REVISIONS_TOGGLE":return!0;default:return e}},searchQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":return t.searchQuery;default:return e}},selectedSearchMatchIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_SEARCH_SELECTION":return t.index;default:return e}},showAlternateLoginPrompt:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALTERNATE_LOGIN_PROMPT":return!e;case"HIDE_ALTERNATE_LOGIN_PROMPT":return!1;default:return e}},showNavigation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVIGATION_TOGGLE":return!e;case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"SHOW_UNTAGGED_NOTES":return!1;case"SHOW_DIALOG":return"SETTINGS"!==t.name&&e;default:return e}},showNoteActions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_ACTIONS_TOGGLE":return!e;case"NAVIGATION_TOGGLE":case"NOTE_ACTIONS_CLOSE":case"NOTE_INFO_TOGGLE":case"REVISIONS_TOGGLE":case"SELECT_NOTE":case"SHOW_DIALOG":case"TRASH_NOTE":return!1;default:return e}},showNoteInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_INFO_TOGGLE":return!e;case"NAVIGATION_TOGGLE":case"NOTE_ACTIONS_TOGGLE":case"SELECT_NOTE":return!1;default:return e}},showNoteList:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_LIST_TOGGLE":return!e;case"FOCUS_SEARCH_FIELD":return!0;case"OPEN_NOTE":return!1;default:return e}},showRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REVISIONS_TOGGLE":return!e;case"CLOSE_REVISION":case"OPEN_NOTE":case"SELECT_NOTE":case"CREATE_NOTE_WITH_ID":case"RESTORE_NOTE_REVISION":return!1;default:return e}},simperiumConnected:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SIMPERIUM_CONNECTION_STATUS_TOGGLE"===t.type?t.simperiumConnected:e},tagSuggestions:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,a=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=a.meta)||void 0===e?void 0:e.searchResults)?t:a.meta.searchResults.tagHashes},unsyncedNoteIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;return"SET_UNSYNCED_NOTE_IDS"===t.type?t.noteIds:e}});function Kn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Yn=Object(sn.c)({browser:Ln,data:Pn,settings:Gn,simperium:Fn,ui:zn}),Qn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||sn.d,Zn=a(19),Jn=a(85),Xn=a.n(Jn);class $n{constructor(e){s()(this,"log",void 0),s()(this,"nextDeadline",Date.now()+1e3),s()(this,"bucket",void 0),s()(this,"queue",void 0),s()(this,"runTimer",null),this.bucket=e,this.log=yn()("bucket-queue:".concat(e.name)),this.queue=new Map,e.on("index",()=>this.schedule()),window.addEventListener("online",()=>this.schedule()),this.schedule()}add(e,t){var a,n=null!==(a=this.queue.get(e))&&void 0!==a?a:1/0,r=Math.min(t,n);this.nextDeadline=Math.min(this.nextDeadline,r),this.log('added "'.concat(e,'" with deadline ').concat(new Date(r))),this.queue.set(e,r),this.schedule()}has(e){return this.queue.has(e)}run(){this.process(),this.schedule()}schedule(){this.runTimer&&clearTimeout(this.runTimer),this.runTimer=setTimeout(()=>this.run(),this.bucket.isIndexing||!navigator.onLine?1e4:this.nextDeadline-Date.now())}process(){if(this.bucket.isIndexing)this.log("skipping processing run because bucket is indexing");else if(navigator.onLine){var e=this.getNextNote();null!==e&&(this.log("telling bucket to sync ".concat(e)),this.queue.delete(e),this.bucket.touch(e).then(()=>this.log("sync'd ".concat(e))))}else this.log("skipping processing run because browser is offline")}getNextNote(){var e=Date.now();for(var[t,a]of this.queue)if(a<=e)return t;return null}}class er{constructor(){s()(this,"entities",void 0),this.entities=new Map}get(e,t){t(null,{id:e,data:this.entities.get(e)})}find(e,t){t(null,[...this.entities].map(e=>{var[t,a]=e;return{id:t,data:a}}))}remove(e,t){this.entities.delete(e),t(null)}update(e,t,a,n){this.entities.set(e,t),n(null,{id:e,data:t,isIndexing:a})}}class tr{constructor(){s()(this,"cv",void 0),s()(this,"entities",void 0),this.cv="",this.entities=new Map}getChangeVersion(){return Promise.resolve(this.cv)}setChangeVersion(e){return this.cv=e,Promise.resolve()}get(e){var t;return Promise.resolve(null!==(t=this.entities.get(e))&&void 0!==t?t:{key:e,data:{}})}put(e,t,a){var n={key:e,data:a,version:t};return this.entities.set(e,n),Promise.resolve(n)}remove(e){var t=this.entities.get(e);return this.entities.delete(e),Promise.resolve(t)}eachGhost(e){this.entities.forEach(t=>e(t))}}class ar{constructor(e){s()(this,"store",void 0),this.store=e}get(e,t){t(null,{id:e,data:this.store.getState().data.notes.get(e)})}find(e,t){t(null,[...this.store.getState().data.notes.entries()].map(e=>{var[t,a]=e;return{id:t,data:a}}))}remove(e,t){this.store.dispatch({type:"NOTE_BUCKET_REMOVE",noteId:e}),t(null)}update(e,t,a,n){this.store.dispatch({type:"NOTE_BUCKET_UPDATE",noteId:e,note:t,isIndexing:a}),n(null,{id:e,data:t})}}class nr{constructor(e){s()(this,"store",void 0),this.store=e}get(e,t){t(null,{id:e,data:this.store.getState().data.preferences.get(e)})}find(e,t){t(null,[...this.store.getState().data.preferences.entries()].map(e=>{var[t,a]=e;return{id:t,data:a}}))}remove(e,t){this.store.dispatch({type:"PREFERENCES_BUCKET_REMOVE",id:e}),t(null)}update(e,t,a,n){this.store.dispatch({type:"PREFERENCES_BUCKET_UPDATE",id:e,data:t,isIndexing:a}),n(null,{id:e,data:t})}}class rr{constructor(e,t){s()(this,"bucketName",void 0),s()(this,"store",void 0),this.bucketName=e,this.store=t}getChangeVersion(){var e=this.store.getState().simperium.ghosts[0].get(this.bucketName);return Promise.resolve(e)}setChangeVersion(e){return this.store.dispatch({type:"GHOST_SET_CHANGE_VERSION",bucketName:this.bucketName,version:e}),Promise.resolve()}get(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),a=null==t?void 0:t.get(e);return Promise.resolve(null!=a?a:{key:e,data:{}})}put(e,t,a){var n={key:e,data:a,version:t};return this.store.dispatch({type:"GHOST_SET_ENTITY",bucketName:this.bucketName,entityId:e,ghost:n}),Promise.resolve(n)}remove(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),a=null==t?void 0:t.get(e);return this.store.dispatch({type:"GHOST_REMOVE_ENTITY",bucketName:this.bucketName,entityId:e}),Promise.resolve(a)}eachGhost(e){var t;(null!==(t=this.store.getState().simperium.ghosts[1].get(this.bucketName))&&void 0!==t?t:new Map).forEach(t=>e(t))}}class or{constructor(e){s()(this,"store",void 0),this.store=e}get(e,t){t(null,{id:e,data:this.store.getState().data.tags.get(e)})}find(e,t){t(null,[...this.store.getState().data.tags.entries()].map(e=>{var[t,a]=e;return{id:t,data:a}}))}remove(e,t){this.store.dispatch({type:"TAG_BUCKET_REMOVE",tagHash:e}),t(null)}update(e,t,a,n){this.store.dispatch({type:"TAG_BUCKET_UPDATE",tagHash:e,tag:t,isIndexing:a}),n(null,{id:e,data:t})}}var sr=yn()("simperium-middleware"),ir=(e,t,n)=>r=>{var{dispatch:o,getState:s}=r,i=Xn()(on()().app_id,t,{objectStoreProvider:e=>{switch(e.name){case"account":return new er;case"note":return new ar(r);case"preferences":return new nr(r);case"tag":return new or(r)}},ghostStoreProvider:e=>{switch(e.name){case"account":return new tr;default:return new rr(e.name,r)}}});i.on("unauthorized",()=>e()),(e=>new Promise(t=>{var a=n=>{if(n.startsWith("0:auth:")){var[r,o]=n.split("0:auth:");e.off("message",a),t(o)}};e.on("message",a)}))(i).then(e=>{sr("authenticated: ".concat(e)),o(E.a.settings.setAccountName(e))}),((e,t)=>{var{dispatch:a,getState:n}=t,r=-1/0;e.on("message",()=>{r=Date.now(),"green"!==n().simperium.connectionStatus&&a({type:"CHANGE_CONNECTION_STATUS",status:"green"})}),setInterval(()=>{var e=Date.now()-r,t=n().simperium.connectionStatus;e>8e3&&"green"===t&&a({type:"CHANGE_CONNECTION_STATUS",status:"red"})},1e3),window.addEventListener("online",()=>{"offline"===n().simperium.connectionStatus&&a({type:"CHANGE_CONNECTION_STATUS",status:"red"})}),window.addEventListener("offline",()=>{a({type:"CHANGE_CONNECTION_STATUS",status:"offline"})}),e.on("disconnect",()=>{a({type:"CHANGE_CONNECTION_STATUS",status:navigator.onLine?"red":"offline"})})})(i,r),ve.b||(e=>{window.addEventListener("beforeunload",t=>{if(0!==dt(e.getState()).notes.length){t.preventDefault();var a="There are unsynchronized changes - do you want to logout and lose those changes?";return t.returnValue=a,a}})})(r);var l=i.bucket("note");l.channel.on("update",(e,t,a,n,r)=>{o(a&&n&&void 0!==r?{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t,remoteInfo:{original:a,patch:n,isIndexing:r}}:{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t})}),l.channel.on("remove",e=>o({type:"REMOTE_NOTE_DELETE_FOREVER",noteId:e})),"Notification"in window&&a.e(3).then(a.bind(null,944)).then(e=>{var{announceNoteUpdates:t}=e;return l.channel.on("update",t(r))}),l.channel.localQueue.on("send",e=>{o({type:"SUBMIT_PENDING_CHANGE",entityId:e.id,ccid:e.ccid})}),l.channel.on("acknowledge",(e,t)=>{o({type:"ACKNOWLEDGE_PENDING_CHANGE",entityId:e,ccid:t.ccid})});var c=i.bucket("tag");c.channel.on("update",(e,t,a,n,r)=>{o(a&&n&&void 0!==r?{type:"REMOTE_TAG_UPDATE",tagHash:e,tag:t,remoteInfo:{original:a,patch:n,isIndexing:r}}:{type:"REMOTE_TAG_UPDATE",tagHash:e,tag:t})}),c.channel.on("remove",e=>o({type:"REMOTE_TAG_DELETE",tagHash:e}));var u=e=>{var{token:t,sent_to:a}=e,r=(e=>{try{var{username:t,verified_at:a}=JSON.parse(e);return{username:t,verifiedAt:a}}catch(e){return null}})(t),s=r&&r.username===n;return o({type:"UPDATE_ACCOUNT_VERIFICATION",state:s?"verified":a===n?"pending":"unverified"})},d=i.bucket("account");d.on("update",(e,t)=>{"email-verification"===e&&u(t)}),d.channel.on("ready",()=>{"unknown"===s().data.accountVerification&&o({type:"UPDATE_ACCOUNT_VERIFICATION",state:"unverified"})});var m=i.bucket("preferences");m.channel.on("update",(e,t)=>{"preferences-key"===e&&!!t.analytics_enabled!==s().data.analyticsAllowed&&o({type:"REMOTE_ANALYTICS_UPDATE",allowAnalytics:!!t.analytics_enabled})}),m.channel.once("ready",Xt()((function*(){var e,t=yield m.get("preferences-key");o({type:"REMOTE_ANALYTICS_UPDATE",allowAnalytics:!(null==t||null===(e=t.data)||void 0===e||!e.analytics_enabled)})})));var p=new $n(l),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return p.add(e,Date.now()+t)},g=new Set,v=new $n(c),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return v.add(e,Date.now()+t)},f=new $n(m);return window.addEventListener("storage",t=>{"simplenote_logout"===t.key&&(pn(),i.end(),e())}),t=>a=>{var n=r.getState(),u=t(a),d=r.getState();switch(a.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var m=Object(ae.a)("ADD_COLLABORATOR"===a.type?a.collaboratorAccount:a.tagName);return n.data.tags.has(m)||N(m),h(a.noteId),u;case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":return h(a.noteId),u;case"CREATE_NOTE_WITH_ID":case"INSERT_TASK_INTO_NOTE":case"EDIT_NOTE":return h(a.noteId),u;case"FILTER_NOTES":case"OPEN_NOTE":case"SELECT_NOTE":var E,v,b,O,T=null!==(E=null!==(v=a.noteId)&&void 0!==v?v:null===(b=a.meta)||void 0===b?void 0:b.nextNoteToOpen)&&void 0!==E?E:s().ui.openedNote;return!T||null!==(O=d.data.noteRevisions.get(T))&&void 0!==O&&O.size||g.has(T)||(g.add(T),setTimeout(()=>{s().ui.openedNote===T&&l.getRevisions(T).then(e=>{o({type:"LOAD_REVISIONS",noteId:T,revisions:e.map(e=>{var{data:t,version:a}=e;return[a,t]}).sort((e,t)=>e[0]-t[0])})})},250)),u;case"REVISIONS_TOGGLE":var y=d.ui.showRevisions,w=d.ui.openedNote;return w&&y&&l.getRevisions(w).then(e=>{o({type:"LOAD_REVISIONS",noteId:w,revisions:e.map(e=>{var{data:t,version:a}=e;return[a,t]}).sort((e,t)=>e[0]-t[0])})}),u;case"RESTORE_NOTE_REVISION":return a.note.tags.map(ae.a).forEach(e=>{n.data.tags.has(e)||N(e,10)}),h(a.noteId,10),u;case"MARKDOWN_NOTE":case"PIN_NOTE":case"PUBLISH_NOTE":case"RESTORE_NOTE":case"TRASH_NOTE":return h(a.noteId,10),u;case"IMPORT_NOTE_WITH_ID":return a.note.tags.forEach(e=>{var t=Object(ae.a)(e);n.data.tags.has(t)||N(t,10)}),h(a.noteId,10),u;case"DELETE_NOTE_FOREVER":return setTimeout(()=>l.remove(a.noteId),10),u;case"RENAME_TAG":var _=Object(ae.a)(a.oldTagName),S=Object(ae.a)(a.newTagName);return S!==_&&setTimeout(()=>c.remove(_),10),d.data.notes.forEach((e,t)=>{n.data.notes.get(t)!==e&&h(t)}),N(S),u;case"REORDER_TAG":return d.data.tags.forEach((e,t)=>{N(t)}),u;case"SET_ANALYTICS":return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;f.add(e,Date.now()+t)}("preferences-key"),u;case"TRASH_TAG":return c.remove(Object(ae.a)(a.tagName)),d.data.notes.forEach((e,t)=>{n.data.notes.get(t)!==e&&h(t)}),u;case"CLOSE_WINDOW":var A=dt(d);return A.notes.forEach(e=>p.add(e,Date.now())),A.notes.length>0?(r.dispatch({type:"SHOW_DIALOG",name:"CLOSE-WINDOW-CONFIRMATION"}),u):(r.dispatch({type:"REALLY_CLOSE_WINDOW"}),u);case"LOGOUT":var R=dt(d);return R.notes.forEach(e=>p.add(e,Date.now())),R.notes.length>0?(r.dispatch({type:"SHOW_DIALOG",name:"LOGOUT-CONFIRMATION"}),u):(pn(),localStorage.setItem("simplenote_logout",Math.random().toString()),i.end(),e(),u);case"REALLY_LOGOUT":return pn(),localStorage.setItem("simplenote_logout",Math.random().toString()),i.end(),e(),u}return u}},lr=(a(80),a(91));var cr=on()(),ur=(e,t,a)=>{c.a.setAppElement("#root"),function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return gn(e).then(t=>{var n,r,[o,s]=t;return Object(sn.e)(Yn,qn(qn({},o),{},{settings:qn(qn({},o.settings),{},{accountName:null!==(n=null===(r=o.settings)||void 0===r?void 0:r.accountName)&&void 0!==n?n:e})}),Qn(cn()("settings",{key:"simpleNote",slicer:e=>t=>({[e]:Object(R.omit)(t[e],["allowNotifications","focusModeEnabled"])})}),Object(sn.a)(On,Qa.a,kn,Sn.a,Fe,In,...ve.b?[_n]:[],...a,...s?[s]:[])))})}(a,ir(e,t,a)).then(e=>{var t;Object.defineProperties(window,{dispatch:{get:()=>e.dispatch},state:{get:()=>e.getState()}}),null===(t=window.electron)||void 0===t||t.send("appStateUpdate",{settings:e.getState().settings,editMode:e.getState().ui.editMode}),Object(Zn.render)(r.a.createElement(i.a,{store:e},r.a.createElement(nn.a,{isDevConfig:Object(lr.a)(null==cr?void 0:cr.development)},r.a.createElement(an,{isDevConfig:Object(lr.a)(null==cr?void 0:cr.development)}))),document.getElementById("root"))})}},214:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"withEvent",(function(){return d})),a.d(n,"recordEvent",(function(){return m}));var r={};a.r(r),a.d(r,"addCollaborator",(function(){return p})),a.d(r,"editNote",(function(){return h})),a.d(r,"exportNotes",(function(){return g})),a.d(r,"importNote",(function(){return E})),a.d(r,"markdownNote",(function(){return v})),a.d(r,"pinNote",(function(){return N})),a.d(r,"publishNote",(function(){return f})),a.d(r,"removeCollaborator",(function(){return b})),a.d(r,"renameTag",(function(){return O})),a.d(r,"toggleAnalytics",(function(){return T}));var o={};a.r(o),a.d(o,"reallyCloseWindow",(function(){return y}));var s={};a.r(s),a.d(s,"remoteNoteUpdate",(function(){return _}));var i=a(5),l=a.n(i);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=(e,t)=>a=>{var n,r;return u(u({},a),{},{meta:u(u({},a.meta),{},{analytics:[...null!==(n=null===(r=a.meta)||void 0===r?void 0:r.analytics)&&void 0!==n?n:[],[e,t]]})})},m=(e,t)=>d(e,t)({type:"RECORD_EVENT"}),p=(e,t)=>({type:"ADD_COLLABORATOR",noteId:e,collaboratorAccount:t}),h=(e,t)=>({type:"EDIT_NOTE",noteId:e,changes:t}),g=()=>({type:"EXPORT_NOTES"}),E=e=>({type:"IMPORT_NOTE",note:e}),v=(e,t)=>({type:"MARKDOWN_NOTE",noteId:e,shouldEnableMarkdown:t}),N=(e,t)=>({type:"PIN_NOTE",noteId:e,shouldPin:t}),f=(e,t)=>({type:"PUBLISH_NOTE",noteId:e,shouldPublish:t}),b=(e,t)=>({type:"REMOVE_COLLABORATOR",noteId:e,collaboratorAccount:t}),O=(e,t)=>({type:"RENAME_TAG",oldTagName:e,newTagName:t}),T=()=>({type:"TOGGLE_ANALYTICS"}),y=()=>({type:"REALLY_CLOSE_WINDOW"}),w=a(458),_=(e,t)=>({type:"REMOTE_NOTE_UPDATE",noteId:e,note:t}),S=a(242);t.a={analytics:n,data:r,electron:o,simperium:s,settings:w,ui:S}},242:function(e,t,a){"use strict";a.r(t),a.d(t,"closeDialog",(function(){return i})),a.d(t,"closeNote",(function(){return l})),a.d(t,"closeNoteActions",(function(){return c})),a.d(t,"closeWindow",(function(){return u})),a.d(t,"createNote",(function(){return d})),a.d(t,"dismissEmailVerifyDialog",(function(){return m})),a.d(t,"deleteOpenNoteForever",(function(){return p})),a.d(t,"emptyTrash",(function(){return h})),a.d(t,"filterNotes",(function(){return g})),a.d(t,"focusSearchField",(function(){return E})),a.d(t,"logout",(function(){return v})),a.d(t,"openNote",(function(){return N})),a.d(t,"openTag",(function(){return f})),a.d(t,"reallyLogOut",(function(){return b})),a.d(t,"restoreOpenNote",(function(){return O})),a.d(t,"selectNoteAbove",(function(){return T})),a.d(t,"selectNoteBelow",(function(){return y})),a.d(t,"selectTrash",(function(){return w})),a.d(t,"showAllNotes",(function(){return _})),a.d(t,"showUntaggedNotes",(function(){return S})),a.d(t,"showDialog",(function(){return A})),a.d(t,"showAlternateLoginPrompt",(function(){return R})),a.d(t,"hideAlternateLoginPrompt",(function(){return I})),a.d(t,"storeRevisions",(function(){return C})),a.d(t,"toggleRevisions",(function(){return D})),a.d(t,"toggleRestoringDeletedTags",(function(){return L})),a.d(t,"search",(function(){return k})),a.d(t,"selectNote",(function(){return M})),a.d(t,"toggleEditMode",(function(){return j})),a.d(t,"toggleNavigation",(function(){return x})),a.d(t,"toggleNoteList",(function(){return P})),a.d(t,"toggleNoteActions",(function(){return G})),a.d(t,"toggleNoteInfo",(function(){return H})),a.d(t,"toggleTagDrawer",(function(){return F})),a.d(t,"toggleTagEditing",(function(){return V})),a.d(t,"trashOpenNote",(function(){return U}));var n=a(5),r=a.n(n);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var i=()=>({type:"CLOSE_DIALOG"}),l=()=>({type:"CLOSE_NOTE"}),c=()=>({type:"NOTE_ACTIONS_CLOSE"}),u=()=>({type:"CLOSE_WINDOW"}),d=e=>({type:"CREATE_NOTE",note:e}),m=()=>({type:"UPDATE_ACCOUNT_VERIFICATION",state:"dismissed"}),p=()=>({type:"DELETE_OPEN_NOTE_FOREVER"}),h=()=>({type:"EMPTY_TRASH"}),g=(e,t)=>({type:"FILTER_NOTES",noteIds:e,tagHashes:t}),E=()=>({type:"FOCUS_SEARCH_FIELD"}),v=()=>({type:"LOGOUT"}),N=e=>({type:"OPEN_NOTE",noteId:e}),f=e=>({type:"OPEN_TAG",tagName:e}),b=()=>({type:"REALLY_LOGOUT"}),O=()=>({type:"RESTORE_OPEN_NOTE"}),T=()=>({type:"SELECT_NOTE_ABOVE"}),y=()=>({type:"SELECT_NOTE_BELOW"}),w=()=>({type:"SELECT_TRASH"}),_=()=>({type:"SHOW_ALL_NOTES"}),S=()=>({type:"SHOW_UNTAGGED_NOTES"}),A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s({type:"SHOW_DIALOG",name:e},t)},R=e=>({type:"SHOW_ALTERNATE_LOGIN_PROMPT",email:e}),I=e=>({type:"HIDE_ALTERNATE_LOGIN_PROMPT",email:e}),C=(e,t)=>({type:"STORE_REVISIONS",noteId:e,revisions:t}),D=()=>({type:"REVISIONS_TOGGLE"}),L=()=>({type:"TOGGLE_RESTORING_DELETED_TAGS"}),k=e=>({type:"SEARCH",searchQuery:e}),M=e=>({type:"SELECT_NOTE",noteId:e}),j=()=>({type:"TOGGLE_EDIT_MODE"}),x=()=>({type:"NAVIGATION_TOGGLE"}),P=()=>({type:"NOTE_LIST_TOGGLE"}),G=()=>({type:"NOTE_ACTIONS_TOGGLE"}),H=()=>({type:"NOTE_INFO_TOGGLE"}),F=e=>({type:"TAG_DRAWER_TOGGLE",show:e}),V=()=>({type:"TAG_EDITING_TOGGLE"}),U=()=>({type:"TRASH_OPEN_NOTE"})},286:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=e=>e.replace(/(?:\btag:)([^\s,]+)/g,"").trim(),r=e=>{if(!e)return[];for(var t,a=/(?:")((?:"|[^"])+?)(?:")/g,r=0,o="",s=n(e),i=[];null!==(t=a.exec(s));)i.push(t[0].slice(1,-1)),o+=s.slice(r,t.index),r=a.lastIndex;(r>0||0===i.length)&&r<s.length&&(o+=s.slice(r));var l=o.split(/[\b\s]/g).map(e=>e.trim()).filter(e=>e);return[...i,...l]}},298:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return u}));var n=a(546),r=a.n(n),o=a(24),s=a(286),i=e=>{var t=new RegExp("\\s*([^\n]{1,".concat(64,"})"),"g").exec(e);if(!t)return"New Note…";var[,a]=t;return a},l=(e,t)=>{return e?(a=t,r()(a.replace(/(\s)\s+/g,"$1"),{stripListLeaders:!1})||t):t;var a},c=new Map,u=(e,t)=>{var a=function(e){return e.systemTags.includes("markdown")}(e),n=c.get(e.content);if(n){var[r,u,d]=n;if(u===a&&d===t)return r}var m=e.content||"",p={title:l(a,i(m)),preview:l(a,((e,t)=>{var a,n="",r=0;if(null!=t&&t.trim()){var l=Object(s.a)(t);if(l.length>0){var c=l[0].toLocaleLowerCase(),u=30-c.length,d=new RegExp("(?:\\s|^)[^\n]{0,"+u+"}"+Object(o.escapeRegExp)(c)+".{0,200}(?=\\s|$)","ims").exec(e);if(d&&d.length>0)return n=d[0].split("\n").filter(t=>"\r"!==t&&""!==t&&t!==i(e)).join("\n"),56320<=(a=n.charCodeAt(0))&&a<=57343?n.slice(1):n}}var m=e.indexOf("\n");if(-1===m)return"";for(;m>-1&&r<3;){var p=e.indexOf("\n",m);if(-1===p)return n+e.slice(m).trim();var h=e.slice(m,p).trim();h&&(n+=h+"\n",r++),m=p+1}return n.trim()})(m,t))};return c.set(e.content,[p,a,t]),p};t.a=u},314:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o}));var n=/^(\s*)- \[( |x|X)\](\s)/gm,r=e=>e.replace(n,(e,t,a,n)=>t+(" "===a?"":"")+n),o=e=>e.replace(/\ue000|\ue001/g,e=>""===e?"- [ ]":"- [x]")},384:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(e){var{onClick:t}=e;return r.a.createElement("svg",{className:"icon-trash",onClick:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M18 21H6c-1.105 0-2-0.895-2-2V9h2v10h12V9h2v10C20 20.105 19.105 21 18 21zM9 9h2v8H9V9zM13 9h2v8h-2V9zM16 5V4c0-1.105-0.895-2-2-2h-4C8.895 2 8 2.895 8 4v1H3v2h18V5H16zM10 4h4v1h-4V4z"}))}},385:function(e,t,a){"use strict";var n=a(70),r=a.n(n),o=a(44),s=a.n(o),i=a(0),l=a.n(i),c=a(1013);t.a=e=>{var{icon:t,title:a}=e,n=s()(e,["icon","title"]);return l.a.createElement(c.a,{classes:{tooltip:"icon-button__tooltip"},enterDelay:200,title:a},l.a.createElement("button",r()({"aria-label":a,className:"icon-button",type:"button","data-title":a},n),t))}},386:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(){return r.a.createElement("svg",{className:"logo",width:"96",height:"96",viewBox:"0 0 176 176"},r.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},r.a.createElement("path",{d:"M152.37 87.885c0-34.066-27.182-63.42-59.45-64.854-6.416-.284-12.647 1.432-17.58 5.573-5.002 4.196-8.07 10.09-8.638 16.595C65.43 59.73 78.537 68.618 91.225 72.09c30.69 8.398 48.462 30.086 46.655 56.757 9.057-11.194 14.49-25.442 14.49-40.962zM84.345 97.24c-28.696-7.853-45.817-29.174-43.62-54.317.027-.287.073-.567.102-.852C29.19 53.846 22 70.023 22 87.886c0 34.348 27.955 63.828 60.277 64.933 7.227.248 14.214-1.685 19.766-6.344 5.67-4.757 9.146-11.435 9.79-18.808 1.703-19.463-16.492-27.417-27.488-30.426z",fill:"#4895d9"})))}},458:function(e,t,a){"use strict";a.r(t),a.d(t,"activateTheme",(function(){return n})),a.d(t,"setNoteDisplay",(function(){return r})),a.d(t,"setLineLength",(function(){return o})),a.d(t,"toggleKeyboardShortcuts",(function(){return s})),a.d(t,"toggleSortOrder",(function(){return i})),a.d(t,"setSortType",(function(){return l})),a.d(t,"toggleSortTagsAlpha",(function(){return c})),a.d(t,"setAccountName",(function(){return u})),a.d(t,"toggleFocusMode",(function(){return d})),a.d(t,"toggleSpellCheck",(function(){return m})),a.d(t,"toggleAutoHideMenuBar",(function(){return p}));var n=e=>({type:"setTheme",theme:e}),r=e=>({type:"setNoteDisplay",noteDisplay:e}),o=e=>({type:"setLineLength",lineLength:e}),s=()=>({type:"KEYBOARD_SHORTCUTS_TOGGLE"}),i=()=>({type:"TOGGLE_SORT_ORDER"}),l=(e,t)=>({type:"setSortType",sortType:e,sortReversed:t}),c=()=>({type:"TOGGLE_SORT_TAGS_ALPHA"}),u=e=>({type:"setAccountName",accountName:e}),d=()=>({type:"TOGGLE_FOCUS_MODE"}),m=()=>({type:"TOGGLE_SPELLCHECK"}),p=()=>({type:"TOGGLE_AUTO_HIDE_MENU_BAR"})},459:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(){return r.a.createElement("svg",{className:"icon-notes",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M19 5V15H9V5H19m0-2H9A2 2 0 0 0 7 5V15a2 2 0 0 0 2 2H19a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2ZM5 19V7A2 2 0 0 0 3 9V19a2 2 0 0 0 2 2H15a2 2 0 0 0 2-2ZM17 7H11V9h6Zm0 4H11v2h6Z"}))}},460:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n);function o(){return r.a.createElement("svg",{className:"icon-untagged-notes",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("path",{d:"M15.79 7.21c0.552 0 1 0.448 1 1s-0.448 1-1 1 -1-0.448-1-1S15.238 7.21 15.79 7.21zM11.5 7.48L13.12 6H18v4.88l-1.48 1.62 1.34 1.42L20 11.71V4h-7.71l-2.21 2.14L11.5 7.48zM21 19.59L4.41 3 3 4.41l4.3 4.3L4 12c-0.388 0.39-0.388 1.02 0 1.41L10.59 20c0.39 0.388 1.02 0.388 1.41 0l3.29-3.29 4.3 4.3L21 19.59zM11.28 17.88l-5.16-5.17 2.59-2.59 5.17 5.17L11.28 17.88z"}))}},461:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(74),s=a(20),i=a.n(s);t.a=e=>{var{onSelect:t,selected:a=!1,interactive:n=!0,deleted:s=!1,tagName:l}=e;return r.a.createElement("div",{className:i()("tag-chip",{selected:a,interactive:n,deleted:s}),"data-tag-name":l,onClick:t},l,n&&r.a.createElement("span",{className:"remove-tag-icon"},r.a.createElement(o.a,null)))}},472:function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return g}));var n=a(5),r=a.n(n),o=a(473),s=a(286),i=a(68),l=a(298);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=[],m=e=>{var t,a,n,r,o,s,l,c,u,d;return{content:null!==(t=null===(a=e.content)||void 0===a?void 0:a.toLocaleLowerCase())&&void 0!==t?t:"",casedContent:null!==(n=e.content)&&void 0!==n?n:"",tags:new Set(null!==(r=null===(o=e.tags)||void 0===o?void 0:o.map(i.a))&&void 0!==r?r:[]),creationDate:null!==(s=e.creationDate)&&void 0!==s?s:Date.now()/1e3,modificationDate:null!==(l=e.modificationDate)&&void 0!==l?l:Date.now()/1e3,isPinned:null!==(c=null===(u=e.systemTags)||void 0===u?void 0:u.includes("pinned"))&&void 0!==c&&c,isTrashed:null!==(d=!!e.deleted)&&void 0!==d&&d}},p=e=>{for(var t,a=/(?:\btag:)([^\s,]+)/g,n=new Set;null!==(t=a.exec(e));)n.add(Object(i.a)(t[1]));return n},h=()=>[],g=e=>{var t={collection:{type:"all"},excludeIDs:[],hasSelectedFirstNote:!1,notes:new Map,searchQuery:"",searchTags:new Set,searchTerms:[],sortType:e.getState().settings.sortType,sortReversed:e.getState().settings.sortReversed,titleOnly:!1},a=[],n=[],r=[],c=e=>{var o=e=>(a,n)=>{var r=t.notes.get(a),o=t.notes.get(n);if(!r||!o)return a.localeCompare(n);if(r.isPinned!==o.isPinned)return r.isPinned?-1:1;var s=e(r,o);return 0!==s?s:a.localeCompare(n)},s=o((e,t)=>e.casedContent.localeCompare(t.casedContent)),i=o((e,t)=>t.creationDate-e.creationDate),l=o((e,t)=>t.modificationDate-e.modificationDate),c=(e,t,a,n,r)=>{if(n>=r)return n;var o=Math.floor((n+r)/2),s=a(t,e[o]);return s<0?c(e,t,a,n,o):s>0?c(e,t,a,o+1,r):o};[[a,s],[n,i],[r,l]].forEach(t=>{var[a,n]=t,r=a.indexOf(e);r>-1&&a.splice(r,1);var o=c(a,e,n,0,a.length);a.splice(o,0,e)})};var g=function(){for(var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,{collection:c,excludeIDs:d,notes:m,searchTags:p,searchTerms:h,sortReversed:g,sortType:E,titleOnly:v}=u(u({},t),o),N=new Set,f=new Set,b=e.getState().data.notes,O="alphabetical"===E?a:"creationDate"===E?n:r,T=function(e){var t=O[g?O.length-e-1:e];if(null!=d&&d.includes(t))return"continue";var a=m.get(t);if(!a||!b.has(t))return"continue";if("trash"===c.type!==a.isTrashed)return"continue";if(("untagged"===c.type||p.has(Object(i.a)("untagged")))&&a.tags.size)return"continue";var n=!0;for(var r of p.values())if("untagged"!==r&&!a.tags.has(r)){n=!1;break}if(!n)return"continue";var o="tag"===c.type&&Object(i.a)(c.tagName);if(0===h.length&&0===p.size&&o&&!a.tags.has(o))return"continue";var s=v?Object(l.b)(a.content):a.content;if(h.length>0&&!h.every(e=>s.includes(e.toLocaleLowerCase())))return"continue";a.isPinned?f.add(t):N.add(t)},y=0;y<O.length&&f.size+N.size<=s;y++)T(y);return[...f.values(),...N.values()]};h=(t,a)=>g(t,a).map(t=>[t,e.getState().data.notes.get(t)]);var E=a=>{var{data:n}=e.getState(),{searchQuery:r}=t,s=Object(o.b)(n.tags,n.noteTags,r);return{noteIds:a,tagHashes:s.length>0?s:d}},v=e=>u(u({},e),{},{meta:u(u({},e.meta),{},{searchResults:E(g())})}),N=(t,a)=>{var n,r,o,{ui:{filteredNotes:s,openedNote:i}}=e.getState();if(!i||i!==t)return a;var l=s.findIndex(e=>e===i),c=-1===l?null!==(n=s[0])&&void 0!==n?n:null:null!==(r=null!==(o=s[l+1])&&void 0!==o?o:s[l-1])&&void 0!==r?r:null;return u(u({},a),{},{meta:u(u({},a.meta),{},{nextNoteToOpen:c})})},f=null,b=()=>{clearTimeout(f),f=setTimeout(()=>{var t=E(g());e.dispatch(u(u({type:"FILTER_NOTES"},t),{},{meta:{searchResults:t}}))},30)};return e.getState().data.notes.forEach((e,a)=>{t.notes.set(a,m(e)),c(a)}),b(),o=>l=>{var d,h,g,E,f,O=e=>{var a,n,r;return!t.hasSelectedFirstNote&&null!==(a=e.meta)&&void 0!==a&&null!==(n=a.searchResults)&&void 0!==n&&n.noteIds.length?(t.hasSelectedFirstNote=!0,o(u(u({},e),{},{meta:u(u({},e.meta),{},{nextNoteToOpen:null===(r=e.meta)||void 0===r?void 0:r.searchResults.noteIds[0]})}))):o(e)};switch(l.type){case"ADD_NOTE_TAG":var T=t.notes.get(l.noteId);return T?(T.tags.add(Object(i.a)(l.tagName)),T.modificationDate=Date.now()/1e3,c(l.noteId),O(v(l))):O(l);case"CREATE_NOTE_WITH_ID":return null!==(d=l.note)&&void 0!==d&&d.tags&&(null===(h=l.note)||void 0===h?void 0:h.tags.length)>0?t.collection={type:"tag",tagName:l.note.tags[0]}:t.collection={type:"all"},t.notes.set(l.noteId,m(null!==(g=l.note)&&void 0!==g?g:{})),c(l.noteId),b(),O(l);case"IMPORT_NOTE_WITH_ID":case"REMOTE_NOTE_UPDATE":case"RESTORE_NOTE_REVISION":return t.notes.set(l.noteId,m(null!==(E=l.note)&&void 0!==E?E:{})),c(l.noteId),b(),O(l);case"DELETE_NOTE_FOREVER":case"REMOTE_NOTE_DELETE_FOREVER":return t.notes.delete(l.noteId),f=l.noteId,[a,n,r].forEach(e=>{var t=e.indexOf(f);t>-1&&e.splice(t,1)}),O(N(l.noteId,v(l)));case"EDIT_NOTE":var y=t.notes.get(l.noteId);return void 0!==l.changes.content&&(y.content=l.changes.content.toLocaleLowerCase(),y.casedContent=l.changes.content),void 0!==l.changes.tags&&(y.tags=new Set(l.changes.tags.map(i.a))),void 0!==l.changes.creationDate&&(y.creationDate=l.changes.creationDate),y.modificationDate=void 0!==l.changes.modificationDate?l.changes.modificationDate:Date.now()/1e3,void 0!==l.changes.deleted&&(y.isTrashed=!!l.changes.deleted),void 0!==l.changes.systemTags&&(y.isPinned=l.changes.systemTags.includes("pinned")),c(l.noteId),O(v(l));case"OPEN_TAG":return t.collection={type:"tag",tagName:l.tagName},O(v(l));case"PIN_NOTE":var w=t.notes.get(l.noteId);return w?(w.isPinned=l.shouldPin,w.modificationDate=Date.now()/1e3,c(l.noteId),O(v(l))):O(l);case"REMOVE_NOTE_TAG":var _=t.notes.get(l.noteId);return _?(_.tags.delete(Object(i.a)(l.tagName)),_.modificationDate=Date.now()/1e3,c(l.noteId),O(v(l))):O(l);case"RENAME_TAG":var S=Object(i.a)(l.oldTagName),A=Object(i.a)(l.newTagName);return"tag"===t.collection.type&&t.collection.tagName===l.oldTagName&&(t.collection={type:"tag",tagName:l.newTagName}),t.notes.forEach((e,t)=>{e.tags.has(S)&&(e.tags.delete(S),e.tags.add(A),e.modificationDate=Date.now()/1e3,c(t))}),O(v(l));case"RESTORE_NOTE":var R=t.notes.get(l.noteId);return R?(R.isTrashed=!1,R.modificationDate=Date.now()/1e3,c(l.noteId),O(N(l.noteId,v(l)))):O(l);case"SELECT_TRASH":return t.collection={type:"trash"},O(v(l));case"SHOW_ALL_NOTES":return t.collection={type:"all"},O(v(l));case"SHOW_UNTAGGED_NOTES":return t.collection={type:"untagged"},O(v(l));case"SEARCH":return t.searchQuery=l.searchQuery,t.searchTerms=Object(s.a)(l.searchQuery),t.searchTags=p(l.searchQuery),O(v(l));case"setSortReversed":return t.sortReversed=l.sortReversed,O(v(l));case"setSortType":return t.sortType=l.sortType,void 0!==l.sortReversed&&(t.sortReversed=l.sortReversed),O(v(l));case"TOGGLE_SORT_ORDER":return t.sortReversed=!t.sortReversed,O(v(l));case"TRASH_NOTE":var I=t.notes.get(l.noteId);return I?(I.isTrashed=!0,I.modificationDate=Date.now()/100,c(l.noteId),O(N(l.noteId,v(l)))):O(l);case"TRASH_TAG":var C=Object(i.a)(l.tagName);return t.notes.forEach((e,t)=>{e.tags.has(C)&&(e.tags.delete(C),e.modificationDate=Date.now()/1e3,c(t))}),"tag"===t.collection.type&&t.collection.tagName!==l.tagName?O(l):("untagged"===t.collection.type&&e.getState().data.tags.size<=1&&(t.collection={type:"all"}),O(v(l)))}return O(l)}}},473:function(e,t,a){"use strict";a.d(t,"b",(function(){return d}));var n=a(5),r=a.n(n),o=a(0),s=a.n(o),i=a(66),l=a(242),c=a(68);class u extends o.Component{constructor(){super(...arguments),r()(this,"updateSearch",e=>{var{searchQuery:t,onSearch:a}=this.props,n=t.trim().split(" ");n.splice(-1,1,e);var r=n.join(" ");a(r+=" ")})}render(){var{filteredTags:e,tags:t}=this.props;return s.a.createElement(o.Fragment,null,e.length>0&&s.a.createElement("div",{className:"tag-suggestions"},s.a.createElement("div",{className:"note-list-header"},"Search by Tag"),s.a.createElement("ul",{className:"tag-suggestions-list theme-color-border"},e.map(e=>{var a="untagged"===e?"untagged":t.get(e).name;return s.a.createElement("li",{key:e,id:e,className:"tag-suggestion-row",onClick:()=>this.updateSearch("tag:".concat(a))},s.a.createElement("div",{className:"tag-suggestion",title:a},"tag:",a))}))))}}r()(u,"displayName","TagSuggestions");var d=(e,t,a)=>{var n=a.trim().split(" ").pop();if(!n)return[];var r=Object(c.a)(n),o=n.startsWith("tag:")&&n.length>4?Object(c.a)(n.slice(4)):null,s=e=>!(!o||e===o||!e.startsWith(o))||e.includes(r),i=[];for(var l of e.keys())s(l)&&i.push(l);return a.includes("tag:")||s(Object(c.a)("untagged"))&&i.push(Object(c.a)("untagged")),i.sort((e,a)=>{var n,o,s,i,l=e.startsWith(r);if(l!==a.startsWith(r))return l?-1:1;var c=null!==(n=null===(o=t.get(e))||void 0===o?void 0:o.size)&&void 0!==n?n:0,u=null!==(s=null===(i=t.get(a))||void 0===i?void 0:i.size)&&void 0!==s?s:0;return c!==u?u-c:e.localeCompare(a)}).slice(0,5)};t.a=Object(i.b)(e=>{var{data:t,ui:{searchQuery:a,tagSuggestions:n}}=e;return{filteredTags:n,searchQuery:a,tags:t.tags}},e=>({onSearch:t=>{e(Object(l.search)(t))}}))(u)},537:function(e,t,a){"use strict";a.r(t),a.d(t,"NotePreview",(function(){return b}));var n=a(0),r=a.n(n),o=a(66),s=a(314),i=a(286),l=a(550),c=a.n(l),u=a(555),d=a.n(u),m=a(24),p={type:"output",regex:'<input type="checkbox" disabled',replace:'<input type="checkbox" '},h={type:"output",regex:">\n",replace:">"},g=e=>a.e(16).then(a.t.bind(null,940,7)).then(t=>{var{default:a}=t;a.extension("enableCheckboxes",p),a.extension("removeLineBreaks",h);var n=new a.Converter({extensions:["enableCheckboxes","removeLineBreaks"]});n.setFlavor("github"),n.setOption("simpleLineBreaks",!1),n.setOption("ghMentions",!1),n.setOption("smoothLivePreview",!0),n.setOption("tables",!0),n.setOption("strikethrough",!0);var r=e.replace(/([ \t\u2000-\u200a]*)\u2022(\s)/gm,"$1-$2");return(e=>{for(var t=(new DOMParser).parseFromString(e,"text/html"),a=t.createTreeWalker(t.body,NodeFilter.SHOW_ALL,null,!1),n=[],r=[],o=function(){var e=a.currentNode;if((e=>{switch(e.nodeName.toLowerCase()){case"head":case"html":case"iframe":case"link":case"meta":case"object":case"script":case"style":return!0;default:return!1}})(e))return r.push(e),"continue";if(!(e=>{var t=e.nodeName.toLowerCase();if("input"===t)return"checkbox"===e.getAttribute("type");switch(t){case"#text":case"a":case"article":case"b":case"br":case"blockquote":case"cite":case"code":case"dd":case"del":case"div":case"dt":case"em":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"hr":case"i":case"img":case"ins":case"kbd":case"li":case"ol":case"p":case"pre":case"s":case"span":case"strong":case"sub":case"sup":case"table":case"tbody":case"td":case"th":case"thead":case"tr":case"tt":case"ul":return!0;default:return!1}})(e))return n.push(e),"continue";var t=e.nodeName.toLowerCase();Object(m.filter)(e.attributes,e=>{var{name:a,value:n}=e;return!((e,t,a)=>{switch(e){case"a":switch(t){case"href":return["http","https","simplenote"].includes(a.toLowerCase().trim().split("://")[0]);case"alt":case"rel":case"title":return!0;default:return!1}case"img":switch(t){case"alt":case"src":case"title":case"width":return!0;default:return!1}case"input":switch(t){case"disabled":case"checked":case"type":return!0;default:return!1}case"li":switch(t){case"class":switch(a){case"task-list-item":return!0;default:return!1}default:return!1}case"ol":switch(t){case"start":return!0;default:return!1}case"th":case"td":switch(t){case"style":switch(a){case"text-align:center;":case"text-align:left;":case"text-align:right;":return!0;default:return!1}default:return!1}default:return!1}})(t,a,n)&&(("href"!==a&&"src"!==a||!d.a.isWebUri(n))&&("href"!==a||!n.startsWith("mailto:")||!c.a.validate(n.slice(7))))}).forEach(t=>{var{name:a}=t;return e.removeAttribute(a)});var o="a"===t&&e.getAttribute("href");"a"!==t||"string"!=typeof o||o.startsWith("mailto:")||(e.setAttribute("target","_blank"),e.setAttribute("rel","external noopener noreferrer")),"li"===t&&"task-list-item"===e.getAttribute("class")&&e.setAttribute("style","list-style: none;")};a.nextNode();)o();return r.forEach(e=>{try{var t;null==e||null===(t=e.parentNode)||void 0===t||t.removeChild(e)}catch(e){}}),n.forEach(e=>{var t,a=e.parentNode;try{for(;t=e.firstChild;)null==a||a.insertBefore(t,e);null==a||a.removeChild(e)}catch(e){}}),t.body.innerHTML})(n.makeHtml(r))}),E=(e,t)=>{var a=e.parentNode;t.forEach(e=>{a.childNodes.forEach(a=>{var n,r,o;if(a.nodeType===Node.TEXT_NODE&&null!==(n=a.textContent)&&void 0!==n&&n.toLocaleLowerCase().includes(e)){var s=null===(r=a.textContent)||void 0===r?void 0:r.toLocaleLowerCase().indexOf(e),i=a.splitText(s),l=i.splitText(e.length),c=document.createElement("span");c.setAttribute("class","search-match"),null===(o=i.parentNode)||void 0===o||o.replaceChild(c,i),c.appendChild(i),E(l,t)}})})},v=(e,t,n)=>g(t).then(t=>(e.innerHTML=t,e)).then(e=>{if(!n)return e.querySelectorAll("pre code");var t=Object(i.a)(n).map(e=>e.toLocaleLowerCase());if(!t.length)return e.querySelectorAll("pre code");for(var a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return t.some(t=>{var a;return null===(a=e.textContent)||void 0===a?void 0:a.toLocaleLowerCase().includes(t)})?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1),r=[],o=a.currentNode;o;)r.push(o),o=a.nextNode();return r.forEach(e=>E(e,t)),e.querySelectorAll("pre code")}).then(e=>{if(e.length)return a.e(12).then(a.t.bind(null,939,7)).then(t=>{var{default:a}=t;e.forEach(a.highlightBlock)}).catch()}),N=a(32),f=a(214),b=e=>{var t,{editNote:a,isFocused:o,note:i,noteId:l,notes:c,openNote:u,searchQuery:d,showRenderedView:m}=e,p=Object(n.useRef)();return Object(n.useEffect)(()=>{var e=e=>{if(!o)return!0;if(!document.getSelection().isCollapsed)return!0;var t=document.createElement("div");v(t,i.content,d).then(()=>{try{e.clipboardData.setData("text/plain",t.innerHTML)}catch(e){navigator.clipboard.writeText(t.innerHTML)}}),e.preventDefault()};return document.addEventListener("copy",e,!1),()=>document.removeEventListener("copy",e,!1)},[o,d]),Object(n.useEffect)(()=>{var e,t=e=>{for(var t,n,r=e.target;null!==r;r=r.parentNode)if("A"===r.tagName){e.preventDefault(),e.stopPropagation();var o=r;if(o.href.startsWith("simplenote://note/")){var d=/^simplenote:\/\/note\/(.+)$/.exec(o.href);if(!d)return;var[m,h]=d;return void(c.has(h)&&u(h))}return void(o.href.startsWith("http://localhost")||Object(N.a)(o.href))}var g="INPUT"===(null==e||null===(t=e.target)||void 0===t?void 0:t.tagName)?e.target.parentElement:e.target;if("INPUT"!==(null==g||null===(n=g.children[0])||void 0===n?void 0:n.tagName));else{e.preventDefault(),e.stopPropagation();var E=p.current.querySelectorAll("[data-markdown-root] .task-list-item"),v=Array.prototype.indexOf.call(E,g),f=0,b=i.content.replace(s.a,(e,t,a,n)=>t+(f++===v?" "===a?"- [x]":"- [ ]":" "===a?"- [ ]":"- [x]")+n);a(l,{content:b})}};return null===(e=p.current)||void 0===e||e.addEventListener("click",t,!0),()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.removeEventListener("click",t,!0)}},[i.content]),Object(n.useEffect)(()=>{var e;p.current&&(null!=i&&i.content&&m?v(p.current,i.content,d):p.current.innerText=Object(s.b)(null!==(e=null==i?void 0:i.content)&&void 0!==e?e:""))},[null==i?void 0:i.content,d,m]),r.a.createElement("div",{className:"note-detail-wrapper"},r.a.createElement("div",{className:"note-detail note-detail-preview"},r.a.createElement("div",{ref:p,className:"note-detail-markdown theme-color-bg theme-color-fg note-preview","data-markdown-root":!0},!m&&Object(s.b)(null!==(t=null==i?void 0:i.content)&&void 0!==t?t:""))))},O={editNote:f.a.data.editNote,openNote:f.a.ui.selectNote};t.default=Object(o.b)((e,t)=>{var a,n,r=null!==(a=t.noteId)&&void 0!==a?a:e.ui.openedNote,o=null!==(n=t.note)&&void 0!==n?n:e.data.notes.get(r);return{isFocused:0===e.ui.dialogs.length&&!e.ui.showNoteActions,note:o,noteId:r,notes:e.data.notes,searchQuery:e.ui.searchQuery,showRenderedView:!(null==o||!o.systemTags.includes("markdown")||e.ui.editMode)}},O)(b)},548:function(e,t,a){},565:function(e,t){},567:function(e,t){}}]);