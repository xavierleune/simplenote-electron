(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{336:function(t,e,r){"use strict";var o=r(5),i=r.n(o),s=r(43),n=r(24);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p=["content","creationDate","deleted","markdown","modificationDate","pinned","tags"];class d extends s.EventEmitter{constructor(t){var e;super(),e=this,i()(this,"importNote",(function(t){var{isTrashed:r=!1,isMarkdown:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(n.pick)(t,p);if(i.publishURL="",i.shareURL="",i.deleted=r,i.tags=Object(n.get)(i,"tags",[]),i.systemTags=Object(n.get)(i,"systemTags",[]),i.pinned&&(i.systemTags.push("pinned"),delete i.pinned),(i.markdown||o)&&(i.systemTags.push("markdown"),delete i.markdown),i.creationDate&&isNaN(i.creationDate)&&(i.creationDate=new Date(i.creationDate).getTime()/1e3),i.creationDate=i.creationDate||i.modificationDate||Date.now(),i.modificationDate=i.modificationDate||i.creationDate||Date.now(),Object.prototype.hasOwnProperty.call(i,"content")||(i.content=""),i.tags){var s=i.tags.map(t=>{var e=t.replace(/(\r\n|\n|\r|\s|,)/gm,"");return Object(n.isEmpty)(e)?void 0:e});i.tags=s.filter(t=>void 0!==t)}e.addNote(i)})),i()(this,"importNotes",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(Object(n.isEmpty)(t))e.emit("status","error","No notes to import.");else{if(t.activeNotes||t.trashedNotes){var o=Object(n.get)(t,"activeNotes",[]).map(t=>e.importNote(t,r)),i=Object(n.get)(t,"trashedNotes",[]).map(t=>e.importNote(t,c(c({},r),{},{isTrashed:!0})));return Promise.all(o.concat(i))}e.emit("status","error","Invalid import format: No active or trashed notes found.")}})),this.addNote=t}}e.a=d},942:function(t,e,r){"use strict";r.r(e),r.d(e,"convertModificationDates",(function(){return u}));var o=r(44),i=r.n(o),s=r(5),n=r.n(s),a=r(43),c=r(336),p=r(24);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}class m extends a.EventEmitter{constructor(t,e,r){super(),n()(this,"importNotes",t=>{var e=new c.a(this.addNote);if(Object(p.isEmpty)(t))this.emit("status","error","No file to import.");else{var r=t[0];if(Object(p.endsWith)(r.name.toLowerCase(),".json"))if(r.size>5e6)this.emit("status","error","File should be less than 5 MB.");else{var o=new FileReader;o.onload=t=>{var r=t.target.result;if(r){var o;try{o=JSON.parse(r)}catch(t){return void this.emit("status","error","Invalid json file.")}var i=o.activeNotes.length+o.trashedNotes.length,s={activeNotes:u(o.activeNotes),trashedNotes:u(o.trashedNotes)};e.importNotes(s,this.options).then(()=>{this.emit("status","complete",i),this.recordEvent("importer_import_completed",{source:"simplenote",note_count:i})})}else this.emit("status","error","File was empty.")},o.readAsText(r)}else this.emit("status","error",'File name does not end in ".json".')}}),this.addNote=t,this.options=e,this.recordEvent=r}}function u(t){return t.map(t=>{var{lastModified:e}=t,r=i()(t,["lastModified"]),o=r.modificationDate||e;o&&isNaN(o)&&(o=new Date(o).getTime()/1e3);var s=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){n()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r);return o&&(s.modificationDate=o),s})}e.default=m}}]);